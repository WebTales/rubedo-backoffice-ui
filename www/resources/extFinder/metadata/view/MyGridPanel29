{
    "type": "gridpanel",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "managesStore": false,
        "designer|userClassName": "MyGridPanel29",
        "designer|userAlias": "mygridpanel29",
        "requires": [
            "Ext.ux.container.SwitchButtonSegment"
        ],
        "id": "dragload",
        "title": "",
        "forceFit": true,
        "store": "ImagePickerStore"
    },
    "configAlternates": {
        "managesStore": "boolean"
    },
    "id": "ExtBox1-ext-gen13457",
    "designerId": "3904f909-0f90-4633-b361-56c6b7e286a5",
    "customConfigs": [
        {
            "group": "(Custom Properties)",
            "name": "managesStore",
            "type": "string"
        }
    ],
    "cn": [
        {
            "type": "gridview",
            "reference": {
                "name": "viewConfig",
                "type": "object"
            },
            "codeClass": null,
            "userConfig": {
                "designer|userClassName": "MyGridView28",
                "id": "DAMImageDrop"
            },
            "designerId": "3170e9e2-c317-4d0d-86de-580b2ece9f26"
        },
        {
            "type": "gridcolumn",
            "reference": {
                "name": "columns",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|userClassName": "MyColumn47",
                "align": null,
                "dataIndex": "filename",
                "text": "Fichier"
            },
            "designerId": "dd431221-d059-4613-b715-97a5179086a2"
        },
        {
            "type": "gridcolumn",
            "reference": {
                "name": "columns",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|userClassName": "MyColumn49",
                "dataIndex": "createUser",
                "text": "Auteur"
            },
            "designerId": "8a6d456d-b088-444b-a2fd-5da4c0c9f9d5",
            "cn": [
                {
                    "type": "fixedfunction",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "designer|userClassName": "renderer",
                        "fn": "renderer",
                        "designer|params": [
                            "value",
                            "metaData",
                            "record",
                            "rowIndex",
                            "colIndex",
                            "store",
                            "view"
                        ],
                        "implHandler": [
                            "return(value.fullName);"
                        ]
                    },
                    "designerId": "3ee0aa90-b5a3-4da8-b9ee-70bb23a4e9f7"
                }
            ]
        },
        {
            "type": "datecolumn",
            "reference": {
                "name": "columns",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|userClassName": "MyDateColumn8",
                "dataIndex": "createTime",
                "text": "Date de création",
                "format": "d-m-Y"
            },
            "designerId": "95abd5fc-7ffd-4c97-ac73-5a8a34c72f70"
        },
        {
            "type": "basiceventbinding",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|userClassName": "onImagesSpecialGridItemDblClick",
                "fn": "onImagesSpecialGridItemDblClick",
                "implHandler": [
                    ""
                ],
                "name": "itemdblclick",
                "scope": "me"
            },
            "designerId": "ceb27d65-e83b-4012-b531-0cf6627127c9"
        },
        {
            "type": "toolbar",
            "reference": {
                "name": "dockedItems",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "dock": "top",
                "ACL": "write.ui.medias",
                "designer|userClassName": "MyToolbar53",
                "height": 64,
                "hidden": true
            },
            "designerId": "c2d520fd-753f-4e90-8946-01bc044e4351",
            "customConfigs": [
                {
                    "group": "(Custom Properties)",
                    "name": "ACL",
                    "type": "string"
                }
            ],
            "cn": [
                {
                    "type": "button",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "layout|flex": null,
                        "designer|userClassName": "MyButton195",
                        "disabled": true,
                        "id": "DAMmainImageDeleteBtn",
                        "iconAlign": "top",
                        "iconCls": "remove_big",
                        "scale": "large",
                        "text": "Supprimer"
                    },
                    "designerId": "6bc61503-5f77-4cb4-8a66-f4f87b499da5",
                    "cn": [
                        {
                            "type": "basiceventbinding",
                            "reference": {
                                "name": "listeners",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "designer|userClassName": "onDAMmainImageDeleteBtnClick",
                                "fn": "onDAMmainImageDeleteBtnClick",
                                "implHandler": [
                                    "Ext.getCmp(\"dragload\").getStore().remove(Ext.getCmp(\"imagesSpecialGrid\").getSelectionModel().getSelection());"
                                ],
                                "name": "click",
                                "scope": "me"
                            },
                            "designerId": "187cb0dc-4f5d-4a4c-a556-db1c44e12c99"
                        }
                    ]
                }
            ]
        },
        {
            "type": "basiceventbinding",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|userClassName": "onImagesSpecialGridSelectionChange",
                "fn": "onImagesSpecialGridSelectionChange",
                "implHandler": [
                    "if (Ext.isEmpty(selections)){",
                    "    Ext.getCmp(\"DAMmainImageDeleteBtn\").disable();",
                    "    Ext.getCmp(\"ImagePickerChooseBtn\").disable();",
                    "} else {",
                    "    Ext.getCmp(\"DAMmainImageDeleteBtn\").enable();",
                    "    Ext.getCmp(\"ImagePickerChooseBtn\").enable();",
                    "",
                    "}"
                ],
                "name": "selectionchange",
                "scope": "me"
            },
            "designerId": "4080e644-4024-4bcb-81f9-af9d431f835a"
        },
        {
            "type": "toolbar",
            "reference": {
                "name": "dockedItems",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "dock": "bottom",
                "designer|userClassName": "MyToolbar44"
            },
            "designerId": "512e7fc4-4772-4810-9b58-a1813cc6fd80",
            "cn": [
                {
                    "type": "tbfill",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "layout|flex": null,
                        "designer|userClassName": "MyFill17"
                    },
                    "designerId": "93ab0d6d-871e-4b84-a98c-6b959c3c8fe9"
                },
                {
                    "type": "button",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "layout|flex": null,
                        "designer|userClassName": "MyButton168",
                        "disabled": true,
                        "id": "ImagePickerChooseBtn",
                        "icon": "../icones/blue/24x24/accept.png",
                        "iconCls": null,
                        "scale": "medium",
                        "text": "Choisir"
                    },
                    "designerId": "468fc59e-064d-4b1f-a4ae-f14c563faaf9",
                    "cn": [
                        {
                            "type": "basiceventbinding",
                            "reference": {
                                "name": "listeners",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "designer|userClassName": "onButtonClick",
                                "fn": "onButtonClick",
                                "implHandler": [
                                    "var fileURL=\"file/get/file-id/\"+button.up().up().getSelectionModel().getLastSelected().get(\"id\");",
                                    "window.opener.CKEDITOR.tools.callFunction( CKEOptions.CKEditorFuncNum, fileURL );"
                                ],
                                "name": "click",
                                "scope": "me"
                            },
                            "designerId": "a40aad4e-b73e-49a7-8ebb-6fd7c1d143d2"
                        }
                    ]
                },
                {
                    "type": "basiceventbinding",
                    "reference": {
                        "name": "listeners",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "designer|userClassName": "onToolbarAfterRender",
                        "fn": "onToolbarAfterRender",
                        "implHandler": [
                            "if (ACL[\"write.ui.medias\"]){var contained = Ext.create(\"Ext.ux.upload.plugin.Window\",{title:\"Ajoutez des images\",height:300,width:440});",
                            "abstractcomponent.add(Ext.create('Ext.ux.upload.Button', {",
                            "text: 'Uploader des images',",
                            "iconCls:\"arrow_up\",",
                            "hidden:true,",
                            "//singleFile: true,",
                            "",
                            "plugins: [contained],",
                            "",
                            "uploader: ",
                            "{",
                            "    url: '../../image/put?token='+ACL.CSRFToken,",
                            "    autoStart: false,",
                            "    max_file_size: '2mb',\t\t\t",
                            "    drop_element: 'dragload',",
                            "    statusQueuedText: 'Pret à télécharger',",
                            "    statusUploadingText: 'Téléchargement ({0}%)',",
                            "    statusFailedText: '<span style=\"color: red\">Erreur</span>',",
                            "    statusDoneText: '<span style=\"color: green\">Fini</span>',",
                            "",
                            "    statusInvalidSizeText: 'Fichier trop volumineux',",
                            "    statusInvalidExtensionText: 'Type de fichier invalide'",
                            "},",
                            "listeners: ",
                            "{",
                            "    filesadded: function(uploader, files)\t\t\t\t\t\t\t\t",
                            "    {",
                            "        //console.log('filesadded');",
                            "        return true;",
                            "    },",
                            "",
                            "    beforeupload: function(uploader, file)\t\t\t\t\t\t\t\t",
                            "    {",
                            "        //console.log('beforeupload');\t\t\t",
                            "    },",
                            "",
                            "    fileuploaded: function(uploader, file)\t\t\t\t\t\t\t\t",
                            "    {",
                            "        //console.log('fileuploaded');",
                            "    },",
                            "",
                            "    uploadcomplete: function(uploader, success, failed)\t\t\t\t\t\t\t\t",
                            "    {",
                            "        abstractcomponent.up().getStore().load();",
                            "        contained.window.close();",
                            "    },",
                            "    scope: this",
                            "}",
                            "",
                            "",
                            "}));}"
                        ],
                        "name": "afterrender",
                        "scope": "me"
                    },
                    "designerId": "ff6138b1-50b4-4388-b6a1-0dee6d4a887c"
                }
            ]
        }
    ]
}