{
    "type": "window",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "designer|userClassName": "ImagePickerWindow",
        "designer|userAlias": "ImagePickerWindow",
        "height": 406,
        "id": "ImagePickerWindow",
        "width": 516,
        "layout": "fit",
        "title": "Choisissez une image",
        "constrainHeader": true,
        "maximizable": false,
        "modal": true
    },
    "id": "ExtBox1-ext-gen22025",
    "designerId": "66bc9f63-6118-4f2d-bd87-201929e19fc2",
    "cn": [
        {
            "type": "gridpanel",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "managesStore": true,
                "designer|userClassName": "MyGridPanel22",
                "title": "",
                "forceFit": true,
                "store": "ImagePickerStore"
            },
            "configAlternates": {
                "managesStore": "boolean"
            },
            "designerId": "e91e1022-47c6-48b7-9315-98b361585191",
            "customConfigs": [
                {
                    "group": "(Custom Properties)",
                    "name": "managesStore",
                    "type": "string"
                }
            ],
            "cn": [
                {
                    "type": "gridview",
                    "reference": {
                        "name": "viewConfig",
                        "type": "object"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "designer|userClassName": "MyGridView22",
                        "id": "dragload"
                    },
                    "designerId": "dc180fd1-ea85-45fc-ab7a-bbeb77f38153"
                },
                {
                    "type": "gridcolumn",
                    "reference": {
                        "name": "columns",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "designer|userClassName": "MyColumn47",
                        "align": null,
                        "dataIndex": "filename",
                        "text": "Prévisualisation"
                    },
                    "designerId": "1375846f-cbee-4430-b9ad-261ac61128ac",
                    "cn": [
                        {
                            "type": "fixedfunction",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "designer|userClassName": "renderer",
                                "fn": "renderer",
                                "designer|params": [
                                    "value",
                                    "metaData",
                                    "record",
                                    "rowIndex",
                                    "colIndex",
                                    "store",
                                    "view"
                                ],
                                "implHandler": [
                                    "return(\"<img src=\\\"../../file/get/file-id/\"+record.get(\"id\")+\"\\\"  height=\\\"100\\\">\");"
                                ]
                            },
                            "designerId": "0e20b7b0-e7bd-41c1-9808-7a4b2a08eace"
                        }
                    ]
                },
                {
                    "type": "gridcolumn",
                    "reference": {
                        "name": "columns",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "designer|userClassName": "MyColumn49",
                        "dataIndex": "createUser",
                        "text": "Auteur"
                    },
                    "designerId": "3c97bf81-a58e-40a4-9015-0083211ccc54",
                    "cn": [
                        {
                            "type": "fixedfunction",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "designer|userClassName": "renderer",
                                "fn": "renderer",
                                "designer|params": [
                                    "value",
                                    "metaData",
                                    "record",
                                    "rowIndex",
                                    "colIndex",
                                    "store",
                                    "view"
                                ],
                                "implHandler": [
                                    "return(value.fullName);"
                                ]
                            },
                            "designerId": "2c6e1b1f-39d2-4327-9b1f-a1b2f1d32667"
                        }
                    ]
                },
                {
                    "type": "toolbar",
                    "reference": {
                        "name": "dockedItems",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "dock": "bottom",
                        "designer|userClassName": "MyToolbar44"
                    },
                    "designerId": "4578280c-2c29-4a3f-af04-7ea4e5c553e6",
                    "cn": [
                        {
                            "type": "tbfill",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "layout|flex": null,
                                "designer|userClassName": "MyFill17"
                            },
                            "designerId": "f182d102-2346-449f-9736-f90d0f3dbef8"
                        },
                        {
                            "type": "button",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "layout|flex": null,
                                "designer|userClassName": "MyButton168",
                                "disabled": true,
                                "id": "ImagePickerChooseBtn",
                                "iconCls": "ouiSpetit",
                                "text": "Choisir"
                            },
                            "designerId": "3333eea4-3a00-4094-a7c0-41045744bf54",
                            "cn": [
                                {
                                    "type": "basiceventbinding",
                                    "reference": {
                                        "name": "listeners",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "designer|userClassName": "onButtonClick",
                                        "fn": "onButtonClick",
                                        "implHandler": [
                                            "Ext.getCmp(button.up().up().up().targetField).setValue(button.up().up().getSelectionModel().getLastSelected().get(\"id\"));\r",
                                            "button.up().up().up().close();"
                                        ],
                                        "name": "click",
                                        "scope": "me"
                                    },
                                    "designerId": "02633a0b-c877-4f37-8276-cf4268fc82ad"
                                }
                            ]
                        },
                        {
                            "type": "button",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "layout|flex": null,
                                "designer|userClassName": "MyButton169",
                                "iconCls": "close",
                                "text": "Annuler"
                            },
                            "designerId": "def9994e-2e81-4f8a-82bf-79d7c8b37406",
                            "cn": [
                                {
                                    "type": "fixedfunction",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "designer|userClassName": "handler",
                                        "fn": "handler",
                                        "designer|params": [
                                            "button",
                                            "event"
                                        ],
                                        "implHandler": [
                                            "button.up().up().up().close();"
                                        ]
                                    },
                                    "designerId": "5a21e9b3-77a8-4b71-a384-32092ee23a9e"
                                }
                            ]
                        },
                        {
                            "type": "basiceventbinding",
                            "reference": {
                                "name": "listeners",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "designer|userClassName": "onToolbarAfterRender",
                                "fn": "onToolbarAfterRender",
                                "implHandler": [
                                    "var contained = Ext.create(\"Ext.ux.upload.plugin.Window\",{title:\"Ajoutez des images\",height:300,width:440});",
                                    "abstractcomponent.add(Ext.create('Ext.ux.upload.Button', {",
                                    "    text: 'Uploader des images',",
                                    "    iconCls:\"arrow_up\",",
                                    "    hidden:true,",
                                    "    //singleFile: true,",
                                    "",
                                    "    plugins: [contained],",
                                    "",
                                    "    uploader: ",
                                    "    {",
                                    "        url: 'image/put?token='+ACL.CSRFToken,",
                                    "        autoStart: false,",
                                    "        max_file_size: '2mb',\t\t\t",
                                    "        drop_element: 'dragload',",
                                    "        statusQueuedText: 'Pret à télécharger',",
                                    "        statusUploadingText: 'Téléchargement ({0}%)',",
                                    "        statusFailedText: '<span style=\"color: red\">Erreur</span>',",
                                    "        statusDoneText: '<span style=\"color: green\">Fini</span>',",
                                    "",
                                    "        statusInvalidSizeText: 'Fichier trop volumineux',",
                                    "        statusInvalidExtensionText: 'Type de fichier invalide'",
                                    "    },",
                                    "    listeners: ",
                                    "    {",
                                    "        filesadded: function(uploader, files)\t\t\t\t\t\t\t\t",
                                    "        {",
                                    "            //console.log('filesadded');",
                                    "            return true;",
                                    "        },",
                                    "",
                                    "        beforeupload: function(uploader, file)\t\t\t\t\t\t\t\t",
                                    "        {",
                                    "            //console.log('beforeupload');\t\t\t",
                                    "        },",
                                    "",
                                    "        fileuploaded: function(uploader, file)\t\t\t\t\t\t\t\t",
                                    "        {",
                                    "            //console.log('fileuploaded');",
                                    "        },",
                                    "",
                                    "        uploadcomplete: function(uploader, success, failed)\t\t\t\t\t\t\t\t",
                                    "        {",
                                    "            abstractcomponent.up().getStore().load();",
                                    "            contained.window.close();",
                                    "        },",
                                    "        scope: this",
                                    "    }",
                                    "",
                                    "",
                                    "}));"
                                ],
                                "name": "afterrender",
                                "scope": "me"
                            },
                            "designerId": "886ec323-d6e1-4859-9820-c51c1074c871"
                        }
                    ]
                },
                {
                    "type": "basiceventbinding",
                    "reference": {
                        "name": "listeners",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "designer|userClassName": "onGridpanelSelectionChange",
                        "fn": "onGridpanelSelectionChange",
                        "implHandler": [
                            "if (Ext.isEmpty(selections)){",
                            "    Ext.getCmp(\"ImagePickerChooseBtn\").disable();",
                            "} else {",
                            "    Ext.getCmp(\"ImagePickerChooseBtn\").enable();",
                            "}"
                        ],
                        "name": "selectionchange",
                        "scope": "me"
                    },
                    "designerId": "c3d4f9b7-a640-4251-be3e-3a5eab89d3ed"
                },
                {
                    "type": "basiceventbinding",
                    "reference": {
                        "name": "listeners",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "designer|userClassName": "onGridpanelItemDblClick",
                        "fn": "onGridpanelItemDblClick",
                        "implHandler": [
                            "Ext.getCmp(\"ImagePickerChooseBtn\").fireEvent(\"click\",Ext.getCmp(\"ImagePickerChooseBtn\"));"
                        ],
                        "name": "itemdblclick",
                        "scope": "me"
                    },
                    "designerId": "fda1843f-3dfd-4e20-b8d7-2ddfefedb6b0"
                }
            ]
        }
    ]
}