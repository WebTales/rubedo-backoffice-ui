/*
 * File: app/controller/LocalisationController.js
 *
 * This file was generated by Sencha Architect version 2.1.0.
 * http://www.sencha.com/products/architect/
 *
 * This file requires use of the Ext JS 4.1.x library, under independent license.
 * License of Sencha Architect does not include license for Ext JS 4.1.x. For more
 * details see http://www.sencha.com/license or contact license@sencha.com.
 *
 * This file will be auto-generated each and everytime you save your project.
 *
 * Do NOT hand edit this file.
 */

Ext.define('Rubedo.controller.LocalisationController', {
    extend: 'Ext.app.Controller',
    alias: 'controller.LocalisationController',

    onButtonAfterRender1: function(abstractcomponent, options) {
        abstractcomponent.on("click", function(){
            Ext.widget('callout', {
                cls: 'gray',
                width: 400,
                html:RubedoAppHelp[abstractcomponent.RApplication],
                calloutArrowLocation: 'top-right',
                target: abstractcomponent,
                relativePosition: 't-b',
                relativeOffsets: [-184,0],
                fadeInDuration: 200,
                fadeOutDuration: 200,
                dismissDelay: 60000
            }).show();

        });
    },

    onComponentBeforeRender: function(abstractcomponent, options) {
        if ((abstractcomponent.isXType("field"))||(abstractcomponent.isXType("checkboxgroup"))){
            abstractcomponent.labelSeparator=" ";
            if (abstractcomponent.isXType("datefield")){
                abstractcomponent.submitFormat='U';
                abstractcomponent.altFormats='U|m/d/Y|n/j/Y|n/j/y|m/j/y|n/d/y|m/j/Y|n/d/Y|m-d-y|m-d-Y|m/d|m-d|md|mdy|mdY|d|Y-m-d|n-j|n/j';
            }    
        }
    },

    onBasefieldAdded: function(abstractcomponent, container, pos, options) {
        if (abstractcomponent.RTip){
            abstractcomponent.anchor="90%";
            container.insert(pos,Ext.widget("RHelpBtn", {tooltip:abstractcomponent.RTip}));
        }
    },

    init: function(application) {
        Ext.require("Ext.ux.callout.Callout");

        //help definitions for application info buttons, temporary
        Ext.define("RubedoAppHelp",{
            singleton:true,
            pages:"test",
            sites:"test",
            masks:"test",
            contentTypes:"test",
            damTypes:"test",
            queries:"test",
            taxonomy:"test",
            groups:"test",
            workspaces:"test",
            users:"test",
            contents:"test",
            dam:"test"
        });

        this.control({
            "#RHelpBtn": {
                afterrender: this.onButtonAfterRender1
            },
            "field": {
                beforerender: this.onComponentBeforeRender,
                added: this.onBasefieldAdded
            }
        });
    }

});
