{
    "type": "Ext.form.field.ComboBox",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "anchor": "90%",
        "designer|userAlias": "queryBuilderField",
        "designer|userClassName": "queryBuilderField",
        "displayField": "name",
        "editable": false,
        "fieldLabel": "Label",
        "forceSelection": true,
        "labelWidth": null,
        "lastQuery": "",
        "queryMode": "local",
        "queryParam": "specificItem",
        "store": "QueriesStore",
        "style": "float: left;",
        "valueField": "id"
    },
    "configAlternates": {
        "style": "string",
        "managesStore": "boolean"
    },
    "designerId": "074f018d-a0e3-4a1e-a693-b6defc4b819c",
    "customConfigs": [
        {
            "group": "(Custom Properties)",
            "name": "anchor",
            "type": "string"
        },
        {
            "group": "(Custom Properties)",
            "name": "lastQuery",
            "type": "string"
        }
    ],
    "cn": [
        {
            "type": "basiceventbinding",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "onComboboxAdded",
                "implHandler": [
                    "component.getStore().load();",
                    "var companion = Ext.widget(\"queryFieldComponent\");",
                    "",
                    "companion.getComponent(\"addBtn\").on(\"click\", function(){",
                    "    var myWin = Ext.widget(\"queryTypeChooseWindow\");",
                    "    myWin.mainFieldId=component.getId();",
                    "    myWin.show();",
                    "});",
                    "companion.getComponent(\"removeBtn\").on(\"click\", function(){",
                    "    component.setValue(null);",
                    "});",
                    "companion.getComponent(\"editBtn\").on(\"click\", function(){",
                    "    var theRec=component.getStore().findRecord(\"id\", component.getValue());",
                    "    var initialQuery = Ext.clone(theRec.get(\"query\"));",
                    "    var returnedFields = Ext.clone(theRec.get(\"returnedFields\"));",
                    "    var recId = Ext.clone(theRec.get(\"id\"));",
                    "    if (theRec.get(\"type\")==\"advanced\") {",
                    "        Ext.widget(\"assistantRequetage\",{editorMode:true, recId:recId, initialQuery:initialQuery, directToCombo:true, mainFieldId:component.getId()}).show();",
                    "    } else if (theRec.get(\"type\")==\"simple\"){",
                    "        Ext.widget(\"assistantRequetage\",{editorMode:true, simpleMode:true, recId:recId, initialQuery:initialQuery, directToCombo:true, mainFieldId:component.getId()}).show();",
                    "",
                    "    } else if (theRec.get(\"type\")==\"manual\"){",
                    "",
                    "        Ext.widget(\"manualQueryInterface\", {returnedFields:returnedFields, editorMode:true, recId:recId, initialQuery:initialQuery}).show();",
                    "    }",
                    "",
                    "});",
                    "companion.getComponent(\"previewBtn\").on(\"click\", function(){",
                    "    Ext.widget(\"QuerySimWindow\",{queryId:component.getValue()}).show();",
                    "});",
                    "component.on(\"change\", function(a,newValue,oldValue){",
                    "",
                    "",
                    "    if (!Ext.isEmpty(oldValue)){",
                    "        var theRec=component.getStore().findRecord(\"id\", oldValue);",
                    "",
                    "        if ((!Ext.isEmpty(theRec))&&(theRec.get(\"type\")!=\"advanced\")) {",
                    "            component.getStore().remove(theRec);",
                    "        }",
                    "    }",
                    "    if (Ext.isEmpty(newValue)){",
                    "        companion.getComponent(\"editBtn\").hide();",
                    "        companion.getComponent(\"removeBtn\").hide();",
                    "        companion.getComponent(\"previewBtn\").hide();",
                    "        component.getStore().filterBy(function(rec){",
                    "            if ((rec.get(\"type\")==\"advanced\")) {",
                    "                return(true);",
                    "            }",
                    "            else {",
                    "                return(false);",
                    "            }",
                    "        });",
                    "    } else {",
                    "        companion.getComponent(\"editBtn\").show();",
                    "        companion.getComponent(\"removeBtn\").show();",
                    "        companion.getComponent(\"previewBtn\").show();",
                    "        component.getStore().filterBy(function(rec){",
                    "            if ((rec.get(\"type\")==\"advanced\")||(rec.get(\"id\")==newValue)) {",
                    "                return(true);",
                    "            }",
                    "            else {",
                    "                return(false);",
                    "            }",
                    "        });",
                    "    }",
                    "",
                    "});",
                    "//var task2 = new Ext.util.DelayedTask(function(){",
                    "//  component.fireEvent(\"change\",component, component.getValue());",
                    "//});",
                    "component.addListener(\"focus\",function(){",
                    "    component.fireEvent(\"change\",component, component.getValue());",
                    "},this,{single:true});",
                    "component.up().add(companion);",
                    "//task2.delay(1600);"
                ],
                "name": "added",
                "scope": "me"
            },
            "name": "onComboboxAdded",
            "designerId": "58bf18b0-ebaa-4351-85e9-68b0175abd4a"
        }
    ]
}