{
    "type": "window",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "designer|userClassName": "MultiChoiceConfigurator",
        "designer|userAlias": "MultiChoiceConfigurator",
        "height": 360,
        "id": "MultiChoiceConfigurator",
        "width": 632,
        "resizable": false,
        "layout": "fit",
        "title": "Editeur de question choix multiple",
        "constrain": true,
        "modal": true
    },
    "configAlternates": {
        "resizable": "boolean"
    },
    "id": "ExtBox1-ext-gen6619",
    "designerId": "547619b3-9e1c-4adf-a83a-d4aa14243ebe",
    "cn": [
        {
            "type": "toolbar",
            "reference": {
                "name": "dockedItems",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "dock": "bottom",
                "designer|userClassName": "MyToolbar72"
            },
            "designerId": "67e26dce-0cf6-4377-9232-f4074c7609f9",
            "cn": [
                {
                    "type": "tbfill",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "layout|flex": null,
                        "designer|userClassName": "MyFill36"
                    },
                    "designerId": "e696e82d-cbfd-4f08-990a-524843455e53"
                },
                {
                    "type": "button",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "layout|flex": null,
                        "designer|userClassName": "MyButton287",
                        "id": "MultiChoiceConfiguratorSubmit",
                        "iconCls": "ouiSpetit",
                        "text": "Valider"
                    },
                    "designerId": "627dd1bd-c39d-40a5-8d82-c65fcfcc827f",
                    "cn": [
                        {
                            "type": "basiceventbinding",
                            "reference": {
                                "name": "listeners",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "designer|userClassName": "onMultiChoiceConfiguratorSubmitClick",
                                "fn": "onMultiChoiceConfiguratorSubmitClick",
                                "implHandler": [
                                    "var initialValues = Ext.clone(button.up().up().initialItemConfig);\r",
                                    "var myId = Ext.clone(button.up().up().targetedId);\r",
                                    "var form = button.up().up().getComponent(0).getForm();\r",
                                    "if (form.isValid()) {\r",
                                    "    var newData = Ext.clone(form.getFieldValues());\r",
                                    "    initialValues.fieldType=newData.fieldType;\r",
                                    "    initialValues.label=newData.fieldLabel;\r",
                                    "    initialValues.tooltip=newData.tooltip;\r",
                                    "    initialValues.qNb=newData.qNb;\r",
                                    "    delete newData.fieldType;\r",
                                    "    delete newData.fieldLabel;\r",
                                    "    delete newData.tooltip;\r",
                                    "    delete newData.qNb;\r",
                                    "    newData.vertical=true;\r",
                                    "    newData.items=[];\r",
                                    "    Ext.Array.forEach(newData.answers, function(answer,index){\r",
                                    "        newData.items.push({\r",
                                    "            boxLabel:answer,\r",
                                    "            inputValue:index,\r",
                                    "            name:myId\r",
                                    "        });\r",
                                    "    });\r",
                                    "    delete newData.answers;\r",
                                    "    initialValues.fieldConfig=newData;\r",
                                    "    Ext.getCmp(myId).itemConfig=initialValues;\r",
                                    "    button.up().up().close();\r",
                                    "    Ext.getCmp(myId).sync();\r",
                                    "}"
                                ],
                                "name": "click",
                                "scope": "me"
                            },
                            "designerId": "bca9b6fc-4363-4402-bc08-ac0ffac22176"
                        }
                    ]
                }
            ]
        },
        {
            "type": "form",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|userClassName": "MyForm58",
                "bodyPadding": 10,
                "title": ""
            },
            "designerId": "af134271-ea20-420c-a392-f87759c39b7d",
            "cn": [
                {
                    "type": "textfield",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "layout|anchor": "100%",
                        "designer|userClassName": "MyTextField81",
                        "name": "fieldLabel",
                        "fieldLabel": "Label de la question",
                        "labelWidth": 140
                    },
                    "designerId": "4281a76e-27f2-4e96-a32f-181781ff4715"
                },
                {
                    "type": "textfield",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "layout|anchor": "100%",
                        "designer|userClassName": "MyTextField82",
                        "name": "qNb",
                        "fieldLabel": "Code de la question",
                        "labelWidth": 140
                    },
                    "designerId": "4dae3c30-2ddb-4d3d-a9f7-7106d4aaea3c"
                },
                {
                    "type": "textfield",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "layout|anchor": "100%",
                        "designer|userClassName": "MyTextField82",
                        "name": "tooltip",
                        "fieldLabel": "Bulle d'aide",
                        "labelWidth": 140
                    },
                    "designerId": "8543ec2e-77e3-4bb3-8a70-f64f3b9d3dcc"
                },
                {
                    "type": "checkboxfield",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "layout|anchor": "100%",
                        "designer|userClassName": "MyCheckbox12",
                        "name": "allowBlank",
                        "fieldLabel": "Faculatif",
                        "labelWidth": 140,
                        "boxLabel": "",
                        "inputValue": "true",
                        "uncheckedValue": null
                    },
                    "designerId": "6a7e3f07-0d2a-4760-a441-b3bec3669a84"
                },
                {
                    "type": "numberfield",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "layout|anchor": "100%",
                        "designer|userClassName": "MyNumberField8",
                        "name": "columns",
                        "fieldLabel": "Nombre de colonnes",
                        "labelWidth": 140,
                        "allowDecimals": false,
                        "minValue": 1
                    },
                    "designerId": "6fc18692-6812-4cca-9a7e-bf5e61babac3"
                },
                {
                    "type": "radiogroup",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "designer|userClassName": "MyRadioGroup",
                        "fieldLabel": "Mode",
                        "labelWidth": 140
                    },
                    "designerId": "20e9a0ed-1271-4d5f-a01e-6c3ac89fdc54",
                    "cn": [
                        {
                            "type": "radiofield",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "designer|userClassName": "MyRadio",
                                "name": "fieldType",
                                "fieldLabel": null,
                                "boxLabel": "Une seule réponse",
                                "inputValue": "radiogroup"
                            },
                            "designerId": "cdf0777a-9f5c-4d6a-b232-05448194ab0d"
                        },
                        {
                            "type": "radiofield",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "designer|userClassName": "MyRadio1",
                                "name": "fieldType",
                                "fieldLabel": null,
                                "boxLabel": "Plusieurs réponses",
                                "inputValue": "checkboxgroup"
                            },
                            "designerId": "6d9bde21-ec6c-411d-b575-05085fe8b8dd"
                        }
                    ]
                }
            ]
        },
        {
            "type": "basiceventbinding",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|userClassName": "onWindowRender",
                "fn": "onWindowRender",
                "implHandler": [
                    "var optionPicker = Ext.create(\"Ext.ux.form.field.BoxSelect\", {\r",
                    "    store:[],\r",
                    "    anchor:\"100%\",\r",
                    "    name:\"answers\",\r",
                    "    fieldLabel:\"Réponses possibles\",\r",
                    "    labelWidth:140,\r",
                    "    queryMode:\"local\",\r",
                    "    submitValue:true,\r",
                    "    multiSelect:true,\r",
                    "    forceSelection:false,\r",
                    "    createNewOnEnter:true,\r",
                    "    hideTrigger:true,\r",
                    "    triggerOnClick:false,\r",
                    "    createNewOnBlur:true,\r",
                    "    stacked:true,\r",
                    "    allowBlank:true\r",
                    "});\r",
                    "abstractcomponent.getComponent(0).add(optionPicker);"
                ],
                "name": "render",
                "scope": "me"
            },
            "designerId": "5c1355e1-842f-46a9-aefa-7c6248833caf"
        },
        {
            "type": "basiceventbinding",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|userClassName": "onWindowAfterRender",
                "fn": "onWindowAfterRender",
                "implHandler": [
                    "var initialValues = Ext.clone(abstractcomponent.initialItemConfig.fieldConfig);\r",
                    "initialValues.fieldType= Ext.clone(abstractcomponent.initialItemConfig.fieldType);\r",
                    "initialValues.answers=Ext.Array.pluck(initialValues.items, \"boxLabel\");\r",
                    "initialValues.fieldLabel=Ext.clone(abstractcomponent.initialItemConfig.label);\r",
                    "initialValues.tooltip=Ext.clone(abstractcomponent.initialItemConfig.tooltip);\r",
                    "initialValues.qNb=Ext.clone(abstractcomponent.initialItemConfig.qNb);\r",
                    "delete initialValues.items;\r",
                    "delete initialValues.vertical;\r",
                    "abstractcomponent.getComponent(0).getForm().setValues(initialValues);"
                ],
                "name": "afterrender",
                "scope": "me"
            },
            "designerId": "41e5ac8d-d725-4ff5-aa21-859820333d6d"
        }
    ]
}