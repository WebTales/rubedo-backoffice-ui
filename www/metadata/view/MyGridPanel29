{
    "type": "gridpanel",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "managesStore": true,
        "designer|userClassName": "MyGridPanel29",
        "designer|userAlias": "mygridpanel29",
        "requires": [
            "Ext.ux.container.SwitchButtonSegment"
        ],
        "id": "dragload",
        "title": "",
        "forceFit": true,
        "store": "ImagePickerStore"
    },
    "configAlternates": {
        "managesStore": "boolean"
    },
    "id": "ExtBox1-ext-gen6258",
    "designerId": "89f85929-4a84-48da-a722-a29ddb7d3424",
    "customConfigs": [
        {
            "group": "(Custom Properties)",
            "name": "managesStore",
            "type": "string"
        }
    ],
    "cn": [
        {
            "type": "gridview",
            "reference": {
                "name": "viewConfig",
                "type": "object"
            },
            "codeClass": null,
            "userConfig": {
                "designer|userClassName": "MyGridView28",
                "id": "DAMImageDrop"
            },
            "designerId": "b4878c17-ac79-4169-9de8-5bb8d417d0ce"
        },
        {
            "type": "gridcolumn",
            "reference": {
                "name": "columns",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|userClassName": "MyColumn47",
                "align": null,
                "dataIndex": "filename",
                "text": "Fichier"
            },
            "designerId": "1f945588-1422-4b63-8841-b82bd999116b"
        },
        {
            "type": "gridcolumn",
            "reference": {
                "name": "columns",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|userClassName": "MyColumn49",
                "dataIndex": "createUser",
                "text": "Auteur"
            },
            "designerId": "b0d8273a-1798-451c-93da-a0d70118b277",
            "cn": [
                {
                    "type": "fixedfunction",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "designer|userClassName": "renderer",
                        "fn": "renderer",
                        "designer|params": [
                            "value",
                            "metaData",
                            "record",
                            "rowIndex",
                            "colIndex",
                            "store",
                            "view"
                        ],
                        "implHandler": [
                            "return(value.fullName);"
                        ]
                    },
                    "designerId": "3023a906-f2fb-49a4-9c92-d76e4e8bcd0c"
                }
            ]
        },
        {
            "type": "datecolumn",
            "reference": {
                "name": "columns",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|userClassName": "MyDateColumn8",
                "dataIndex": "createTime",
                "text": "Date de création",
                "format": "d-m-Y"
            },
            "designerId": "e8b0c09c-1e28-4ec6-852f-b022d754149b"
        },
        {
            "type": "basiceventbinding",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|userClassName": "onImagesSpecialGridItemDblClick",
                "fn": "onImagesSpecialGridItemDblClick",
                "implHandler": [
                    "var fenetre = Ext.getCmp(record.get(\"filename\")+\"NadPreview\");\r",
                    "if (Ext.isDefined(fenetre)){ fenetre.toFront(); }\r",
                    "else {\r",
                    "    fenetre = Ext.widget('ImagePreviewWindow', {title:record.get(\"filename\"), id:record.get(\"filename\")+\"NadPreview\"});\r",
                    "    fenetre.getComponent(0).setSrc(\"file/get/file-id/\"+record.get(\"id\"));\r",
                    "    Ext.getCmp('desktopCont').add(fenetre);\r",
                    "    fenetre.show();\r",
                    "}"
                ],
                "name": "itemdblclick",
                "scope": "me"
            },
            "designerId": "4fc17c53-cb36-47e6-89dd-212b64acf6ce"
        },
        {
            "type": "toolbar",
            "reference": {
                "name": "dockedItems",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "dock": "top",
                "designer|userClassName": "MyToolbar53",
                "height": 64,
                "hidden": false
            },
            "designerId": "a83d4a6f-7b14-4cd8-8bd1-a5014eba0994",
            "cn": [
                {
                    "type": "button",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "layout|flex": null,
                        "designer|userClassName": "MyButton195",
                        "disabled": true,
                        "id": "DAMmainImageDeleteBtn",
                        "iconAlign": "top",
                        "iconCls": "remove_big",
                        "scale": "large",
                        "text": "Supprimer"
                    },
                    "designerId": "25e9fa9d-4294-4430-a8c3-a0538d9f0def",
                    "cn": [
                        {
                            "type": "basiceventbinding",
                            "reference": {
                                "name": "listeners",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "designer|userClassName": "onDAMmainImageDeleteBtnClick",
                                "fn": "onDAMmainImageDeleteBtnClick",
                                "implHandler": [
                                    "Ext.getCmp(\"dragload\").getStore().remove(Ext.getCmp(\"imagesSpecialGrid\").getSelectionModel().getSelection());"
                                ],
                                "name": "click",
                                "scope": "me"
                            },
                            "designerId": "01f8f94f-d8d0-4514-ad87-c97f0092c7b2"
                        }
                    ]
                }
            ]
        },
        {
            "type": "basiceventbinding",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|userClassName": "onImagesSpecialGridSelectionChange",
                "fn": "onImagesSpecialGridSelectionChange",
                "implHandler": [
                    "if (Ext.isEmpty(selections)){\r",
                    "    Ext.getCmp(\"DAMmainImageDeleteBtn\").disable();\r",
                    "    Ext.getCmp(\"ImagePickerChooseBtn\").disable();\r",
                    "} else {\r",
                    "    Ext.getCmp(\"DAMmainImageDeleteBtn\").enable();\r",
                    "    Ext.getCmp(\"ImagePickerChooseBtn\").enable();\r",
                    "\r",
                    "}"
                ],
                "name": "selectionchange",
                "scope": "me"
            },
            "designerId": "5f117600-d741-48b5-9414-acc946798cd9"
        },
        {
            "type": "toolbar",
            "reference": {
                "name": "dockedItems",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "dock": "bottom",
                "designer|userClassName": "MyToolbar44"
            },
            "designerId": "0422904c-d984-44fd-955e-26a1a8995da1",
            "cn": [
                {
                    "type": "tbfill",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "layout|flex": null,
                        "designer|userClassName": "MyFill17"
                    },
                    "designerId": "402d06e2-2b23-4135-b9d5-568a754ce029"
                },
                {
                    "type": "button",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "layout|flex": null,
                        "designer|userClassName": "MyButton168",
                        "disabled": true,
                        "id": "ImagePickerChooseBtn",
                        "iconCls": "ouiSpetit",
                        "text": "Choisir"
                    },
                    "designerId": "18484aea-f8f1-4205-b0a5-918389f1c75a",
                    "cn": [
                        {
                            "type": "basiceventbinding",
                            "reference": {
                                "name": "listeners",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "designer|userClassName": "onButtonClick",
                                "fn": "onButtonClick",
                                "implHandler": [
                                    "Ext.getCmp(button.up().up().up().targetField).setValue(button.up().up().getSelectionModel().getLastSelected().get(\"id\"));\r",
                                    "button.up().up().up().close();"
                                ],
                                "name": "click",
                                "scope": "me"
                            },
                            "designerId": "c52a2dcc-3e10-44af-bb52-a19d2efc8e68"
                        }
                    ]
                },
                {
                    "type": "button",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "layout|flex": null,
                        "designer|userClassName": "MyButton169",
                        "iconCls": "close",
                        "text": "Annuler"
                    },
                    "designerId": "653bf941-4f0c-4880-b3d4-3a3c7b137c7b",
                    "cn": [
                        {
                            "type": "fixedfunction",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "designer|userClassName": "handler",
                                "fn": "handler",
                                "designer|params": [
                                    "button",
                                    "event"
                                ],
                                "implHandler": [
                                    "button.up().up().up().close();"
                                ]
                            },
                            "designerId": "e18c4bf0-0ba7-4aa3-9263-63df6388a473"
                        }
                    ]
                },
                {
                    "type": "basiceventbinding",
                    "reference": {
                        "name": "listeners",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "designer|userClassName": "onToolbarAfterRender",
                        "fn": "onToolbarAfterRender",
                        "implHandler": [
                            "var contained = Ext.create(\"Ext.ux.upload.plugin.Window\",{title:\"Ajoutez des images\",height:300,width:440});\r",
                            "abstractcomponent.add(Ext.create('Ext.ux.upload.Button', {\r",
                            "    text: 'Uploader des images',\r",
                            "    iconCls:\"arrow_up\",\r",
                            "    hidden:true,\r",
                            "    //singleFile: true,\r",
                            "\r",
                            "    plugins: [contained],\r",
                            "\r",
                            "    uploader: \r",
                            "    {\r",
                            "        url: 'image/put?token='+ACL.CSRFToken,\r",
                            "        autoStart: false,\r",
                            "        max_file_size: '2mb',\t\t\t\r",
                            "        drop_element: 'dragload',\r",
                            "        statusQueuedText: 'Pret à télécharger',\r",
                            "        statusUploadingText: 'Téléchargement ({0}%)',\r",
                            "        statusFailedText: '<span style=\"color: red\">Erreur</span>',\r",
                            "        statusDoneText: '<span style=\"color: green\">Fini</span>',\r",
                            "\r",
                            "        statusInvalidSizeText: 'Fichier trop volumineux',\r",
                            "        statusInvalidExtensionText: 'Type de fichier invalide'\r",
                            "    },\r",
                            "    listeners: \r",
                            "    {\r",
                            "        filesadded: function(uploader, files)\t\t\t\t\t\t\t\t\r",
                            "        {\r",
                            "            //console.log('filesadded');\r",
                            "            return true;\r",
                            "        },\r",
                            "\r",
                            "        beforeupload: function(uploader, file)\t\t\t\t\t\t\t\t\r",
                            "        {\r",
                            "            //console.log('beforeupload');\t\t\t\r",
                            "        },\r",
                            "\r",
                            "        fileuploaded: function(uploader, file)\t\t\t\t\t\t\t\t\r",
                            "        {\r",
                            "            //console.log('fileuploaded');\r",
                            "        },\r",
                            "\r",
                            "        uploadcomplete: function(uploader, success, failed)\t\t\t\t\t\t\t\t\r",
                            "        {\r",
                            "            abstractcomponent.up().getStore().load();\r",
                            "            contained.window.close();\r",
                            "        },\r",
                            "        scope: this\r",
                            "    }\r",
                            "\r",
                            "\r",
                            "}));"
                        ],
                        "name": "afterrender",
                        "scope": "me"
                    },
                    "designerId": "9727fa0b-7316-48f8-bd00-cf775ddb01b4"
                }
            ]
        }
    ]
}