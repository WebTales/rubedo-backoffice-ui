{
    "type": "Ext.window.Window",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "container|align": "stretch",
        "height": 492,
        "id": "searchResultsWindow",
        "width": 936,
        "designer|userClassName": "searchResultsWindow",
        "designer|userAlias": "searchResultsWindow",
        "layout": "hbox",
        "iconCls": "search",
        "title": "Résultats de recherche",
        "constrainHeader": true
    },
    "designerId": "f720ad71-dfb5-436d-95de-957b47102cb6",
    "cn": [
        {
            "type": "Ext.form.Panel",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "layout|flex": null,
                "id": "searchFacetBox",
                "width": 240,
                "designer|userClassName": "MyForm35",
                "overflowY": "auto",
                "bodyPadding": "0 20 0 10",
                "title": "Filtres"
            },
            "designerId": "35d80392-506f-4f26-89c9-d833f433870d",
            "cn": [
                {
                    "type": "Ext.toolbar.Toolbar",
                    "reference": {
                        "name": "dockedItems",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "dock": "top",
                        "designer|userClassName": "MyToolbar50"
                    },
                    "designerId": "2f9dc766-5c89-4824-9f2c-c5aec6163e59",
                    "cn": [
                        {
                            "type": "Ext.form.field.Text",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "layout|flex": 1,
                                "id": "ESFacetQueryField",
                                "designer|userClassName": "MyTextField62",
                                "fieldLabel": "",
                                "labelWidth": 40,
                                "name": "query",
                                "enableKeyEvents": null
                            },
                            "designerId": "c9204439-6bcb-47e9-a8bf-19d76e699b6d",
                            "cn": [
                                {
                                    "type": "basiceventbinding",
                                    "reference": {
                                        "name": "listeners",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "designer|userClassName": "onESFacetQueryFieldSpecialkey",
                                        "fn": "onESFacetQueryFieldSpecialkey",
                                        "implHandler": [
                                            "if (e.getKey() == e.ENTER) {\r",
                                            "    Ext.getCmp(\"ESFacetQueryBtn\").fireEvent(\"click\",Ext.getCmp(\"ESFacetQueryBtn\"));\r",
                                            "}"
                                        ],
                                        "name": "specialkey",
                                        "scope": "me"
                                    },
                                    "designerId": "274b65e7-04f6-42dd-94e9-109b39b6a6a8"
                                }
                            ]
                        },
                        {
                            "type": "Ext.toolbar.Fill",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "layout|flex": 0.01,
                                "designer|userClassName": "MyFill22"
                            },
                            "designerId": "512f81f9-c89e-4638-b647-ca6a0bf63761"
                        },
                        {
                            "type": "Ext.button.Button",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "layout|flex": null,
                                "id": "ESFacetQueryBtn",
                                "designer|userClassName": "MyButton190",
                                "iconCls": "search",
                                "text": ""
                            },
                            "designerId": "3586846f-9108-4862-ac69-bfeec8c1a386"
                        }
                    ]
                }
            ]
        },
        {
            "type": "basiceventbinding",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|userClassName": "onSearchResultsWindowBeforeClose",
                "fn": "onSearchResultsWindowBeforeClose",
                "implHandler": [
                    "Ext.getStore(\"ESFacetteStore\").removeAll();\r",
                    "Ext.getStore(\"ESFacetteStore\").activeFacettes={ };\r",
                    "Ext.getStore(\"ESFacetteStore\").getProxy().api.read='elastic-search';"
                ],
                "name": "beforeclose",
                "scope": "me"
            },
            "designerId": "3c8c07db-76a3-49f2-b1df-f29002e3b9d4"
        },
        {
            "type": "linkedinstance",
            "reference": {
                "name": "tools",
                "type": "array"
            },
            "codeClass": null,
            "designerId": "e2a3863b-0d18-42a3-ace3-b1c83d8bdde2",
            "masterInstanceId": "7263f6b0-1331-4499-84af-95500ad7f815"
        },
        {
            "type": "linkedinstance",
            "reference": {
                "name": "tools",
                "type": "array"
            },
            "codeClass": null,
            "designerId": "3817e883-13c7-41a2-86d5-0ea327a084eb",
            "masterInstanceId": "1ab0b0a2-44a7-48b2-8bf5-cfcf4aa29237"
        },
        {
            "type": "Ext.grid.Panel",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "layout|flex": 1,
                "id": "ResultContentsGrid",
                "itemId": null,
                "designer|userClassName": "MyGridPanel20",
                "designer|userAlias": "mygridpanel20",
                "title": "",
                "store": "ESFacetteStore"
            },
            "designerId": "7ebe237b-4559-4f9b-9f7e-314717f87dd7",
            "cn": [
                {
                    "type": "Ext.grid.View",
                    "reference": {
                        "name": "viewConfig",
                        "type": "object"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "designer|userClassName": "MyGridView2"
                    },
                    "designerId": "5dc083f4-5a24-48aa-9b80-e39f6ddee069"
                },
                {
                    "type": "Ext.grid.column.Column",
                    "reference": {
                        "name": "columns",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "designer|userClassName": "MyColumn5",
                        "dataIndex": "text",
                        "text": "Titre",
                        "flex": 2
                    },
                    "configAlternates": {
                        "filter": "boolean"
                    },
                    "designerId": "e3587e55-0229-4cf6-b84f-d922e423dbf2"
                },
                {
                    "type": "Ext.grid.column.Column",
                    "reference": {
                        "name": "columns",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "designer|userClassName": "MyColumn58",
                        "dataIndex": "author",
                        "text": "Auteur",
                        "flex": 1
                    },
                    "designerId": "302e7c0e-40b0-4342-ace9-aa72863c4baa"
                },
                {
                    "type": "Ext.grid.column.Date",
                    "reference": {
                        "name": "columns",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "designer|userClassName": "MyDateColumn7",
                        "dataIndex": "lastUpdateTime",
                        "text": "Date de dernière modification",
                        "flex": 1.2,
                        "format": "F j, Y, G:i "
                    },
                    "designerId": "6799363c-d3dc-42bb-a27c-905f3682946c"
                },
                {
                    "type": "Ext.grid.column.Number",
                    "reference": {
                        "name": "columns",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "width": 80,
                        "designer|userClassName": "MyNumberColumn1",
                        "dataIndex": "score",
                        "text": "Pertinence",
                        "format": "0"
                    },
                    "designerId": "29ffe6fa-f510-43ee-a552-7e882fb3117a"
                },
                {
                    "type": "Ext.toolbar.Paging",
                    "reference": {
                        "name": "dockedItems",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "dock": "bottom",
                        "width": 360,
                        "designer|userClassName": "MyPagingToolbar4",
                        "displayInfo": true,
                        "store": "ESFacetteStore"
                    },
                    "designerId": "cccd126e-1f28-4c4e-9e7b-40559bbac696"
                }
            ]
        },
        {
            "type": "Ext.toolbar.Toolbar",
            "reference": {
                "name": "dockedItems",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "layout|flex": 1,
                "dock": "top",
                "id": "ESSearchTopBar",
                "designer|userClassName": "MyToolbar63"
            },
            "designerId": "fdf08f42-7a2e-463f-abe9-d5a7f8fe80a7",
            "cn": [
                {
                    "type": "Ext.toolbar.Toolbar",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "layout|flex": null,
                        "border": 0,
                        "cls": null,
                        "height": 32,
                        "id": "SearchActiveFacetBar",
                        "designer|userClassName": "MyToolbar58",
                        "enableOverflow": true
                    },
                    "designerId": "d5a31d22-aa7d-442c-a3af-7ec604f5ed14"
                },
                {
                    "type": "Ext.toolbar.Fill",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "layout|flex": null,
                        "designer|userClassName": "MyFill29"
                    },
                    "designerId": "5ca14368-c13a-4a27-965c-1e0ed7bb9217"
                },
                {
                    "type": "Ext.button.Button",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "layout|flex": null,
                        "id": "ESFavBtn",
                        "itemId": "boutonCreerRaccourci",
                        "designer|userClassName": "MyButton253",
                        "iconCls": "favorite_add_med",
                        "scale": "medium",
                        "text": ""
                    },
                    "designerId": "0a9d678c-0299-444b-b6a1-91103dd41bc3"
                },
                {
                    "type": "Ext.button.Button",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "layout|flex": null,
                        "hidden": true,
                        "id": "saveGeoQueryBtn",
                        "designer|userClassName": "MyButton302",
                        "iconCls": "ouiSpetit",
                        "text": "Enregistrer la requête"
                    },
                    "designerId": "9cf03ae4-4207-4cb9-8b92-84f157812be5",
                    "cn": [
                        {
                            "type": "basiceventbinding",
                            "reference": {
                                "name": "listeners",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "designer|userClassName": "onSaveGeoQueryBtnClick",
                                "fn": "onSaveGeoQueryBtnClick",
                                "implHandler": [
                                    "var rez = Ext.JSON.encode(Ext.getStore(\"ESFacetteStore\").activeFacettes);\r",
                                    "Ext.getCmp(button.up().up().targetedId).setValue(rez);\r",
                                    "button.up().up().close();"
                                ],
                                "name": "click",
                                "scope": "me"
                            },
                            "designerId": "c87dea85-371e-49e1-a34b-f68cce4beeb2"
                        }
                    ]
                }
            ]
        },
        {
            "type": "basiceventbinding",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|userClassName": "onSearchResultsWindowBeforeRender",
                "fn": "onSearchResultsWindowBeforeRender",
                "implHandler": [
                    "if (component.geoQueryMode){\r",
                    "    component.modal=true;\r",
                    "    component.setTitle(\"Assistant de requête Elastic Search geolocalisée\");\r",
                    "    Ext.getStore(\"ESFacetteStore\").activeFacettes={ };\r",
                    "    Ext.getCmp(\"ESFavBtn\").hide();\r",
                    "    Ext.getCmp(\"saveGeoQueryBtn\").show();\r",
                    "    if (!Ext.isEmpty(component.predefFacettes)){\r",
                    "        Ext.getStore(\"ESFacetteStore\").activeFacettes=component.predefFacettes;\r",
                    "    }\r",
                    "    Ext.getStore(\"ESFacetteStore\").getProxy().api.read='elastic-search-geo';\r",
                    "    Ext.getStore(\"ESFacetteStore\").load();\r",
                    "} else if (component.queryMode){\r",
                    "    component.modal=true;\r",
                    "    component.setTitle(\"Assistant de requête Elastic Search\");\r",
                    "    Ext.getStore(\"ESFacetteStore\").activeFacettes={ };\r",
                    "    Ext.getCmp(\"ESFavBtn\").hide();\r",
                    "    Ext.getCmp(\"saveGeoQueryBtn\").show();\r",
                    "    if (!Ext.isEmpty(component.predefFacettes)){\r",
                    "        Ext.getStore(\"ESFacetteStore\").activeFacettes=component.predefFacettes;\r",
                    "    }\r",
                    "    Ext.getStore(\"ESFacetteStore\").getProxy().api.read='elastic-search';\r",
                    "    Ext.getStore(\"ESFacetteStore\").load();\r",
                    "\r",
                    "} else if (component.damQueryMode){\r",
                    "    component.modal=true;\r",
                    "    component.setTitle(\"Assistant de requête DAM Elastic Search\");\r",
                    "    Ext.getStore(\"ESFacetteStore\").activeFacettes={ };\r",
                    "    Ext.getCmp(\"ESFavBtn\").hide();\r",
                    "    Ext.getCmp(\"saveGeoQueryBtn\").show();\r",
                    "    if (!Ext.isEmpty(component.predefFacettes)){\r",
                    "        Ext.getStore(\"ESFacetteStore\").activeFacettes=component.predefFacettes;\r",
                    "    }\r",
                    "    Ext.getStore(\"ESFacetteStore\").getProxy().api.read='elastic-search-dam';\r",
                    "    Ext.getStore(\"ESFacetteStore\").load();\r",
                    "\r",
                    "}"
                ],
                "name": "beforerender",
                "scope": "me"
            },
            "designerId": "5afffbfb-8aa3-4117-a030-1a82d4cfb93a"
        }
    ]
}