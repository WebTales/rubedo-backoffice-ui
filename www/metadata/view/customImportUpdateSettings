{
    "type": "Ext.container.Container",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "container|align": "stretch",
        "designer|userAlias": "customImportUpdateSettings",
        "designer|userClassName": "customImportUpdateSettings",
        "flex": 3,
        "height": null,
        "id": "customImportUpdateSettings",
        "layout": "hbox",
        "width": null
    },
    "configAlternates": {
        "flex": "number"
    },
    "designerId": "91936584-1faa-42f7-9489-65fb196a66c7",
    "customConfigs": [
        {
            "group": "(Custom Properties)",
            "name": "flex",
            "type": "string"
        }
    ],
    "cn": [
        {
            "type": "Ext.grid.Panel",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "forceFit": true,
                "layout|flex": 1,
                "store": "NotInportFieldsStore",
                "title": ""
            },
            "designerId": "04f6732f-ee9e-4cb0-9479-fa3bddb897c0",
            "cn": [
                {
                    "type": "Ext.grid.column.Column",
                    "reference": {
                        "name": "columns",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "dataIndex": "name",
                        "text": "Detected fields"
                    },
                    "designerId": "cd4f2f60-f850-4010-bd7b-77ec35f2502d"
                },
                {
                    "type": "Ext.grid.View",
                    "reference": {
                        "name": "viewConfig",
                        "type": "object"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "markDirty": false
                    },
                    "designerId": "f54ad825-ab95-4b5f-8b96-8b5ca311785b"
                }
            ]
        },
        {
            "type": "Ext.form.Panel",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "autoScroll": true,
                "bodyPadding": 10,
                "layout|flex": 3,
                "title": "Field mapping"
            },
            "designerId": "b8f72b1e-081e-4587-8c63-e661042be4b5",
            "cn": [
                {
                    "type": "Ext.form.field.ComboBox",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "allowBlank": false,
                        "allowOnlyWhitespace": false,
                        "displayField": "type",
                        "editable": false,
                        "fieldLabel": "Content type",
                        "forceSelection": true,
                        "id": "importCtSelector",
                        "layout|anchor": "100%",
                        "name": "contentTypeId",
                        "store": "TCImportCombo",
                        "valueField": "id"
                    },
                    "designerId": "c50b7ce9-42e7-4a87-868a-6db706a6052e",
                    "cn": [
                        {
                            "type": "basiceventbinding",
                            "reference": {
                                "name": "listeners",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "fn": "onImportCtSelectorSelect",
                                "implHandler": [
                                    "Ext.getCmp(\"importCTFFieldset\").removeAll();\r",
                                    "Ext.getCmp(\"importTaxoFieldset\").removeAll();\r",
                                    "Ext.getStore(\"ImportKeyFieldStore\").removeAll();\r",
                                    "var record=records[0];\r",
                                    "var uniqueKeyFields=[\r",
                                    "    {\r",
                                    "        name:\"text\",\r",
                                    "        label:\"Title\"\r",
                                    "    },\r",
                                    "    {\r",
                                    "        name:\"summary\",\r",
                                    "        label:\"Summary\"\r",
                                    "    }\r",
                                    "];\r",
                                    "var fieldSelectors=[\r",
                                    "{\r",
                                    "                            xtype: 'combobox',\r",
                                    "                            anchor: '100%',\r",
                                    "                            fieldLabel: \"Title\",\r",
                                    "                            name: \"text\",\r",
                                    "                            editable: false,\r",
                                    "                            displayField: 'name',\r",
                                    "                            forceSelection: true,\r",
                                    "                            queryMode: 'local',\r",
                                    "                            store: 'NotInportFieldsStore',\r",
                                    "                            valueField: 'csvIndex'\r",
                                    "                        },\r",
                                    "    {\r",
                                    "                            xtype: 'combobox',\r",
                                    "                            anchor: '100%',\r",
                                    "                            fieldLabel: \"Summary\",\r",
                                    "                            name: \"summary\",\r",
                                    "                            editable: false,\r",
                                    "                            displayField: 'name',\r",
                                    "                            forceSelection: true,\r",
                                    "                            queryMode: 'local',\r",
                                    "                            store: 'NotInportFieldsStore',\r",
                                    "                            valueField: 'csvIndex'\r",
                                    "                        }\r",
                                    "];\r",
                                    "Ext.Array.forEach(record.get(\"champs\"),function(champ){\r",
                                    "    uniqueKeyFields.push({\r",
                                    "        name:champ.config.name,\r",
                                    "        label:champ.config.fieldLabel\r",
                                    "    });\r",
                                    "    fieldSelectors.push({\r",
                                    "                            xtype: 'combobox',\r",
                                    "                            anchor: '100%',\r",
                                    "                            fieldLabel: champ.config.fieldLabel,\r",
                                    "                            name: champ.config.name,\r",
                                    "                            editable: false,\r",
                                    "                            displayField: 'name',\r",
                                    "                            forceSelection: true,\r",
                                    "                            queryMode: 'local',\r",
                                    "                            store: 'NotInportFieldsStore',\r",
                                    "                            valueField: 'csvIndex'\r",
                                    "                        });\r",
                                    "});\r",
                                    "Ext.getStore(\"ImportKeyFieldStore\").loadData(uniqueKeyFields);\r",
                                    "Ext.getCmp(\"importCTFFieldset\").add(fieldSelectors);\r",
                                    "var taxoSelectors=[];\r",
                                    "Ext.Array.forEach(record.get(\"vocabularies\"),function(vocabulary){\r",
                                    "    if (vocabulary!=\"navigation\"){\r",
                                    "    taxoSelectors.push({\r",
                                    "                            xtype: 'combobox',\r",
                                    "                            anchor: '100%',\r",
                                    "                            fieldLabel: Ext.getStore(\"TaxoForImportKeys\").findRecord(\"id\",vocabulary).get(\"name\"),\r",
                                    "                            name: vocabulary,\r",
                                    "                            editable: false,\r",
                                    "                            displayField: 'name',\r",
                                    "                            forceSelection: true,\r",
                                    "                            queryMode: 'local',\r",
                                    "                            store: 'NotInportFieldsStore',\r",
                                    "                            valueField: 'csvIndex'\r",
                                    "                        });\r",
                                    "    }\r",
                                    "});\r",
                                    "Ext.getCmp(\"importTaxoFieldset\").add(taxoSelectors);\r",
                                    "if (record.get(\"productType\")==\"configurable\"){\r",
                                    "    if (Ext.isEmpty(Ext.getCmp(\"importProductOptionsFieldset\"))){\r",
                                    "        Ext.getCmp(\"importTaxoFieldset\").up().add(Ext.widget(\"importProductOptionsFieldset\", {anchor:\"100%\"}));\r",
                                    "    }\r",
                                    "} else {\r",
                                    "    if (!Ext.isEmpty(Ext.getCmp(\"importProductOptionsFieldset\"))){\r",
                                    "        Ext.getCmp(\"importProductOptionsFieldset\").up().remove(Ext.getCmp(\"importProductOptionsFieldset\"));\r",
                                    "    }\r",
                                    "}"
                                ],
                                "name": "select",
                                "scope": "me"
                            },
                            "designerId": "46029588-277e-4f5c-8b3b-dd940f35684d"
                        }
                    ]
                },
                {
                    "type": "Ext.form.field.ComboBox",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "allowBlank": false,
                        "allowOnlyWhitespace": false,
                        "displayField": "name",
                        "editable": false,
                        "fieldLabel": "Unique key index",
                        "forceSelection": true,
                        "layout|anchor": "100%",
                        "name": "uniqueKeyIndex",
                        "queryMode": "local",
                        "store": "NotInportFieldsStore",
                        "valueField": "csvIndex"
                    },
                    "designerId": "9b0695b0-dbb1-4dda-b03a-f9c247b07fab"
                },
                {
                    "type": "Ext.form.field.ComboBox",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "allowBlank": false,
                        "allowOnlyWhitespace": false,
                        "displayField": "label",
                        "editable": false,
                        "fieldLabel": "Unique key field",
                        "forceSelection": true,
                        "layout|anchor": "100%",
                        "name": "uniqueKeyField",
                        "queryMode": "local",
                        "store": "ImportKeyFieldStore",
                        "valueField": "name"
                    },
                    "designerId": "a2f065b1-166c-45e2-b869-a8a87fe079b4"
                },
                {
                    "type": "Ext.form.FieldSet",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "id": "importCTFFieldset",
                        "title": "Content fields indexes"
                    },
                    "designerId": "5c75c470-514c-45cd-9e36-2c8f77c7ad3a"
                },
                {
                    "type": "Ext.form.FieldSet",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "id": "importTaxoFieldset",
                        "title": "Taxonomy fields indexes"
                    },
                    "designerId": "b5d8ea91-55af-4f28-84b5-65c12421b9dc"
                }
            ]
        }
    ]
}