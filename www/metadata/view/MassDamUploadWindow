{
    "type": "Ext.window.Window",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "height": 323,
        "id": "MassDamUploadWindow",
        "width": 466,
        "designer|userClassName": "MassDamUploadWindow",
        "designer|userAlias": "MassDamUploadWindow",
        "resizable": false,
        "layout": "fit",
        "bodyPadding": 2,
        "title": "Digital assets mass upload",
        "constrain": true,
        "modal": true
    },
    "configAlternates": {
        "resizable": "boolean"
    },
    "designerId": "9b8d0b76-4792-4abf-a9db-b52033d4cab6",
    "cn": [
        {
            "type": "Ext.panel.Panel",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "container|align": "center",
                "container|pack": "center",
                "border": 4,
                "id": "massDamUploadDropZone",
                "layout": "vbox",
                "bodyBorder": true,
                "bodyCls": [
                    "contrastRow"
                ],
                "title": ""
            },
            "designerId": "9d75fb9f-b6da-4d5a-ac84-c9f85fa46793",
            "cn": [
                {
                    "type": "basiceventbinding",
                    "reference": {
                        "name": "listeners",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "fn": "onMassDamUploadDropZoneAfterRender",
                        "implHandler": [
                            "component.setBorder(4);"
                        ],
                        "name": "afterrender",
                        "scope": "me"
                    },
                    "designerId": "68de89c1-200b-4f70-a240-db48dc365525"
                },
                {
                    "type": "Ext.Img",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "layout|flex": null,
                        "height": 128,
                        "style": "{opacity:0.4;}",
                        "width": 128,
                        "src": "resources/icones/generic/image_add.png"
                    },
                    "configAlternates": {
                        "style": "string"
                    },
                    "designerId": "0185a33c-65b1-496f-9ed3-bc1c43e27b38"
                },
                {
                    "type": "Ext.container.Container",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "height": 60,
                        "html": "<h1 style=\"color:#999;\">Drop files here</h1>",
                        "styleHtmlContent": true,
                        "width": 179
                    },
                    "configAlternates": {
                        "html": "string"
                    },
                    "designerId": "b53460f0-0119-42f6-816e-303d6d440874"
                }
            ]
        },
        {
            "type": "Ext.toolbar.Toolbar",
            "reference": {
                "name": "dockedItems",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "dock": "bottom",
                "height": 30,
                "hidden": true
            },
            "designerId": "2f86ce6b-90b4-4437-8857-2f3af0145bc6",
            "cn": [
                {
                    "type": "basiceventbinding",
                    "reference": {
                        "name": "listeners",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "fn": "onToolbarAfterRender",
                        "implHandler": [
                            "var updBtn=Ext.create('Ext.ux.upload.Button', {\r",
                            "\t\ttext: 'Select files',\r",
                            "\t\tplugins: [Ext.create('Ext.ux.upload.plugin.Window',{\r",
                            "                      title: 'Upload',\r",
                            "                      width: 520,\r",
                            "                      height: 350,\r",
                            "            windowModal:true,\r",
                            "            windowId:\"auxUploadWindow1\"\r",
                            "                  })\r",
                            "        ],\r",
                            "\t\tuploader: \r",
                            "\t\t{\r",
                            "\t\t\turl: 'dam/mass-upload',\r",
                            "\t\t\tautoStart: true,\r",
                            "\t\t\tmax_file_size: '2020mb',\t\t\t\r",
                            "\t\t\tdrop_element: 'massDamUploadDropZone',\r",
                            "\t\t\tstatusQueuedText: 'Ready to upload',\r",
                            "\t\t\tstatusUploadingText: 'Uploading ({0}%)',\r",
                            "            autoRemoveUploaded:false,\r",
                            "            multipart_params:{\r",
                            "                \"activeFacets\":Ext.JSON.encode(Ext.getStore(\"DAMFacetteStore\").activeFacettes),\r",
                            "                \"token\":ACL.CSRFToken,\r",
                            "                \"writeWorkspace\":ACL.defaultWorkspace\r",
                            "            },\r",
                            "\t\t\tstatusFailedText: '<span style=\"color: red\">Error</span>',\r",
                            "\t\t\tstatusDoneText: '<span style=\"color: green\">Complete</span>',\r",
                            "            /*filters: [\r",
                            "                {title: \"Image files\", extensions: \"jpg,gif,png\"}\r",
                            "            ],*/\r",
                            "\t\t\tstatusInvalidSizeText: 'File too large',\r",
                            "\t\t\tstatusInvalidExtensionText: 'Invalid file type'\r",
                            "\t\t},\r",
                            "\t\tlisteners: \r",
                            "\t\t{\r",
                            "\t\t\tfilesadded: function(uploader, files)\t\t\t\t\t\t\t\t\r",
                            "\t\t\t{\r",
                            "\t\t\t\t//console.log('filesadded');\r",
                            "\t\t\t\treturn true;\r",
                            "\t\t\t},\r",
                            "\t\t\t\r",
                            "\t\t\tbeforeupload: function(uploader, file)\t\t\t\t\t\t\t\t\r",
                            "\t\t\t{\r",
                            "\t\t\t\t//console.log('beforeupload');\t\t\t\r",
                            "\t\t\t},\r",
                            "\r",
                            "\t\t\tfileuploaded: function(uploader, file)\t\t\t\t\t\t\t\t\r",
                            "\t\t\t{\r",
                            "\t\t\t\t//console.log('fileuploaded');\r",
                            "\t\t\t},\r",
                            "\t\t\t\r",
                            "\t\t\tuploadcomplete: function(uploader, success, failed)\t\t\t\t\t\t\t\t\r",
                            "\t\t\t{\r",
                            "                if(Ext.isEmpty(Ext.getCmp(\"buttonToExitUploadWindow\"))){\r",
                            "                    Ext.getCmp(\"auxUploadWindow1\").getComponent(0).getDockedComponent(2).add(Ext.widget(\"button\",{\r",
                            "                        text:\"<b>OK</b>\",\r",
                            "                        id:\"buttonToExitUploadWindow\",\r",
                            "                        handler:function(btn){\r",
                            "                            uploader.removeAll();\r",
                            "                            Ext.getCmp(\"auxUploadWindow1\").hide();\r",
                            "                            btn.up().remove(btn);\r",
                            "                        }\r",
                            "                    }));\t\r",
                            "                }\r",
                            "\t\t\t},\r",
                            "\t\t\tscope: this\r",
                            "\t\t}\r",
                            "\t\t\t\t\r",
                            "\t\t\r",
                            "\t});\r",
                            "component.add(updBtn);"
                        ],
                        "name": "afterrender",
                        "scope": "me"
                    },
                    "designerId": "c2393a56-f5bf-4642-ae3c-24f87d69b51a"
                }
            ]
        },
        {
            "type": "basiceventbinding",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "onMassDamUploadWindowBeforeClose",
                "implHandler": [
                    "Ext.getStore(\"DAMFacetteStore\").load();\r",
                    "Ext.getCmp(\"auxUploadWindow1\").close();"
                ],
                "name": "beforeclose",
                "scope": "me"
            },
            "designerId": "c24a4f37-bdc4-4770-bed8-408725fca186"
        }
    ]
}