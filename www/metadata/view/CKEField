{
    "type": "Ext.form.field.TextArea",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "designer|userAlias": "CKEField",
        "designer|userClassName": "CKEField",
        "fieldLabel": "Label",
        "height": null,
        "minHeight": null,
        "stripCharsRe": null
    },
    "designerId": "d307504b-480a-4d03-adf2-dc2c18432b4f",
    "cn": [
        {
            "type": "basiceventbinding",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "onTextareafieldAfterRender",
                "implHandler": [
                    "var myTBConfig=[",
                    "    { name: 'document', groups: [ 'mode', 'document', 'doctools' ], items: [ 'Source', '-', 'NewPage', 'Preview', 'Print', '-', 'Templates' ] },",
                    "    { name: 'clipboard', groups: [ 'clipboard', 'undo' ], items: [ 'Cut', 'Copy', 'Paste', 'PasteText', 'PasteFromWord', '-', 'Undo', 'Redo',\"Source\"  ] },",
                    "    { name: 'editing', groups: [ 'find', 'selection', 'spellchecker' ], items: [ 'Find', 'Replace', '-', 'SelectAll', '-', 'Scayt' ] },",
                    "",
                    "",
                    "    { name: 'basicstyles', groups: [ 'basicstyles', 'cleanup' ], items: [ 'Bold', 'Italic', 'Underline', 'Strike', 'Subscript', 'Superscript', '-', 'RemoveFormat' ] },",
                    "    { name: 'paragraph', groups: [ 'list', 'indent', 'blocks', 'align', 'bidi' ], items: [ 'NumberedList', 'BulletedList', '-', 'Outdent', 'Indent', '-', 'Blockquote', '-', 'JustifyLeft', 'JustifyCenter', 'JustifyRight', 'JustifyBlock']},",
                    "",
                    "",
                    "    { name: 'styles', items: [ 'Styles', 'Format', 'Font', 'FontSize' ] },",
                    "    { name: 'colors', items: [ 'TextColor', '-','BGColor' ] },",
                    "    { name: 'tools', items: [ 'Maximize', '-','ShowBlocks' ] },",
                    "    { name: 'links', items: [ 'Link', \"Rubedolink\", 'Unlink','-','Anchor' ] },",
                    "",
                    "    { name: 'insert', items: [ 'Image',  '-', 'Table', 'HorizontalRule', 'SpecialChar', 'PageBreak' ] }",
                    "];",
                    "if (component.CKETBConfig==\"Standard\"){",
                    "    myTBConfig=[",
                    "        { name: 'basicstyles', groups: [ 'basicstyles', 'cleanup' ], items: [ 'Bold', 'Italic', 'Underline', 'Strike', 'Subscript', 'Superscript', '-', 'RemoveFormat' ] },",
                    "        { name: 'paragraph', groups: [ 'list', 'indent', 'blocks', 'align', 'bidi' ], items: [ 'NumberedList', 'BulletedList', '-', 'Outdent', 'Indent', '-', 'Blockquote', '-', 'JustifyLeft', 'JustifyCenter', 'JustifyRight', 'JustifyBlock']},",
                    "        { name: 'colors', items: [ 'TextColor','BGColor','-', 'Scayt' ] },",
                    "        { name: 'styles', items: [ 'Styles', 'Format', 'Font', 'FontSize' ] },",
                    "        { name: 'insert', items: [ 'Image',  '-', 'Table', 'SpecialChar', 'PageBreak', 'Link', \"Rubedolink\", 'Unlink'] },",
                    "        { name: 'managing', items: [ 'Maximize','-','Undo', 'Redo', \"Source\"  ] }",
                    "    ];",
                    "} else if (component.CKETBConfig==\"Basic\"){",
                    "    myTBConfig=[",
                    "        { name: 'basicstyles', groups: [ 'basicstyles', 'cleanup' ], items: [ 'Bold', 'Italic', 'Underline','Strike', '-', 'RemoveFormat' ] },",
                    "        { name: 'paragraph', groups: [ 'list', 'indent', 'blocks', 'align', 'bidi' ], items: [ 'NumberedList', 'BulletedList', '-',  'JustifyLeft', 'JustifyCenter', 'JustifyRight', 'JustifyBlock','-','Image']},",
                    "        { name: 'colors', items: [ 'TextColor','BGColor' ,'-', 'Scayt'] },",
                    "        { name: 'styles', items: [ 'Font', 'FontSize' ] }",
                    "",
                    "",
                    "    ];",
                    "} else if (component.CKETBConfig==\"Email\"){",
                    "    myTBConfig=[",
                    "        { name: 'basicstyles', groups: [ 'basicstyles', 'cleanup' ], items: [ 'Bold', 'Italic', 'Underline','Strike', '-', 'RemoveFormat' ] },",
                    "        { name: 'paragraph', groups: [ 'list', 'indent', 'blocks', 'align', 'bidi' ], items: [ 'NumberedList', 'BulletedList', '-',  'JustifyLeft', 'JustifyCenter', 'JustifyRight', 'JustifyBlock']},",
                    "        { name: 'colors', items: [ 'TextColor','BGColor' ,'-', 'Scayt'] },",
                    "        { name: 'styles', items: [ 'Styles', 'Format', 'Font', 'FontSize' ] },",
                    "        { name: 'insert', items: [ 'Image',  '-', 'SpecialChar', 'Link', \"Rubedolink\", 'Unlink'] },",
                    "        { name: 'managing', items: [ 'Maximize','-','Undo', 'Redo',\"Source\"  ] }",
                    "",
                    "",
                    "    ];",
                    "}",
                    "",
                    "var targetId = component.getInputId();",
                    "if (Ext.isEmpty(Ext.getStore(\"CurrentUserDataStore\"))){",
                    "    var userLanguage=\"en\";",
                    "} else {",
                    "    var userLanguage=Ext.getStore(\"CurrentUserDataStore\").getRange()[0].get(\"language\");",
                    "}",
                    "if (Ext.isEmpty(userLanguage)){",
                    "    userLanguage='en';",
                    "}",
                    "component.editor= CKEDITOR.replace(targetId,{toolbar:  myTBConfig, allowedContent:true, contentsCss:\"/theme/default/css/rubedo-all.css\", language:userLanguage, extraPlugins:'rubedolink,stylesheetparser',resize_enabled:false, filebrowserImageBrowseUrl:\"ext-finder?type=Image\", filebrowserImageUploadUrl:null});",
                    "component.editor.on(\"maximize\",function(){",
                    "    var mainWindow=component.findParentByType(\"window\");",
                    "    if (!Ext.isEmpty(mainWindow)){",
                    "        var task3 = new Ext.util.DelayedTask(function(){",
                    "            mainWindow.doLayout();",
                    "        });",
                    "        task3.delay(200);",
                    "    }",
                    "});",
                    "component.editor.on('instanceReady', function(){",
                    "    if (component.CKETBConfig==\"Email\"){",
                    "        component.editor.dataProcessor.htmlFilter.addRules(",
                    "            {",
                    "                elements:",
                    "                {",
                    "                    $: function (element) {",
                    "                        // Output dimensions of images as width and height",
                    "                        if (element.name == 'img') {",
                    "                            var style = element.attributes.style;",
                    "",
                    "                            if (style) {",
                    "                                // Get the width from the style.",
                    "                                var match = /(?:^|\\s)width\\s*:\\s*(\\d+)px/i.exec(style),",
                    "                                    width = match && match[1];",
                    "",
                    "                                // Get the height from the style.",
                    "                                match = /(?:^|\\s)height\\s*:\\s*(\\d+)px/i.exec(style);",
                    "                                var height = match && match[1];",
                    "",
                    "                                // Get the align from the style",
                    "",
                    "                                var match = /(?:^|\\s)float\\s*:\\s*(left|right)/i.exec(style),",
                    "                                    align = match && match[1];",
                    "",
                    "                                // Get the hspace and vspace from the style",
                    "",
                    "                                var match =  /(?:^|\\s)margin\\s*:\\s*(\\d+)px\\s*(\\d+)px/i.exec(style);",
                    "                                var vspace = match && match[1];",
                    "                                var hspace = match && match[2];",
                    "",
                    "                                if ((!vspace)&&(!hspace)){",
                    "                                    var match =  /(?:^|\\s)margin\\s*:\\s*(\\d+)px/i.exec(style);",
                    "                                    var hvspace=match && match[1];",
                    "                                }",
                    "",
                    "                                if (hvspace) {",
                    "                                    element.attributes.style = element.attributes.style.replace(/(?:^|\\s)margin\\s*:\\s*(\\d+)px;?/i, '');",
                    "                                    element.attributes.vspace = hvspace;",
                    "                                    element.attributes.hspace = hvspace;",
                    "                                }",
                    "",
                    "                                if (vspace) {",
                    "                                    element.attributes.style = element.attributes.style.replace(/(?:^|\\s)margin\\s*:\\s*(\\d+)px\\s*(\\d+)px;?/i, '');",
                    "                                    element.attributes.vspace = vspace;",
                    "                                }",
                    "",
                    "                                if (hspace) {",
                    "                                    element.attributes.style = element.attributes.style.replace(/(?:^|\\s)margin\\s*:\\s*(\\d+)px\\s*(\\d+)px;?/i, '');",
                    "                                    element.attributes.hspace = hspace;",
                    "                                }",
                    "",
                    "",
                    "                                if (width) {",
                    "                                    element.attributes.style = element.attributes.style.replace(/(?:^|\\s)width\\s*:\\s*(\\d+)px;?/i, '');",
                    "                                    element.attributes.width = width;",
                    "                                }",
                    "",
                    "                                if (height) {",
                    "                                    element.attributes.style = element.attributes.style.replace(/(?:^|\\s)height\\s*:\\s*(\\d+)px;?/i, '');",
                    "                                    element.attributes.height = height;",
                    "                                }",
                    "",
                    "                                if (align) {",
                    "                                    element.attributes.style = element.attributes.style.replace(/(?:^|\\s)float\\s*:\\s*(left|right);?/i, '');",
                    "                                    element.attributes.align = align;",
                    "                                }",
                    "                            }",
                    "                        }",
                    "",
                    "",
                    "",
                    "                        if (!element.attributes.style)",
                    "                            delete element.attributes.style;",
                    "",
                    "                        return element;",
                    "                    }",
                    "                }",
                    "            });",
                    "",
                    "",
                    "",
                    "    }",
                    "    component.up().doLayout();",
                    "    component.editor.document.getDocumentElement().on('click', function(){",
                    "        component.getEl().dom.click();",
                    "    });",
                    "    component.editor.on('blur', function(){",
                    "        component.validate();",
                    "    });",
                    "});",
                    ""
                ],
                "name": "afterrender",
                "scope": "me"
            },
            "name": "onTextareafieldAfterRender",
            "designerId": "0d473cf7-8a08-442c-a253-4fe63b539c25"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "getValue",
                "implHandler": [
                    "return(this.getRawValue());"
                ]
            },
            "name": "getValue",
            "designerId": "8596bf7d-caf3-459d-8f8f-939c5177cd73"
        },
        {
            "type": "basiceventbinding",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "onTextareafieldBeforeDestroy",
                "implHandler": [
                    "try {component.editor.destroy();} catch(err) {\r",
                    "console.log(\"cke destroy anomaly\");\r",
                    "}"
                ],
                "name": "beforedestroy",
                "scope": "me"
            },
            "name": "onTextareafieldBeforeDestroy",
            "designerId": "b57e2716-9740-4f9d-b0ec-144e41eb45ec"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|params": [
                    "value"
                ],
                "fn": "setValue",
                "implHandler": [
                    "if (typeof(ContentContributor)!=\"undefined\"){\r",
                    "try{\r",
                    "    var me=this;\r",
                    "    if (!Ext.isEmpty(value)){\r",
                    "    var task = new Ext.util.DelayedTask(function(){\r",
                    "    me.editor.setData(value);\r",
                    "        });\r",
                    "    task.delay(200);\r",
                    "    }\r",
                    "} catch (err) {\r",
                    "}\r",
                    "} else {\r",
                    "var me=this;\r",
                    "if (Ext.isDefined(me.editor)) {\r",
                    "    me.editor.setData(value);\r",
                    "} else {\r",
                    "    me.value=value;\r",
                    "    me.on(\"afterrender\",function(){\r",
                    "        me.editor.setData(value);\r",
                    "    });\r",
                    "}\r",
                    "}"
                ]
            },
            "name": "setValue",
            "designerId": "0e06946f-efae-4aa6-83d8-7e108db4e464"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "getRawValue",
                "implHandler": [
                    "var me=this;\r",
                    "if (Ext.isDefined(me.editor)) {\r",
                    "    return(me.editor.getData());\r",
                    "} else {\r",
                    "    return(me.value);\r",
                    "}"
                ]
            },
            "name": "getRawValue",
            "designerId": "611d8653-5926-4310-8fb5-0d14257c441a"
        },
        {
            "type": "basiceventbinding",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "onTextareafieldErrorChange",
                "implHandler": [
                    "var me = this;\r",
                    "if (!Ext.isEmpty(error)){\r",
                    "    if (!me.editor.container.hasClass(\"ckefail\")){\r",
                    "        me.editor.container.addClass(\"ckefail\");\r",
                    "    }\r",
                    "} else {\r",
                    "    if (me.editor.container.hasClass(\"ckefail\")){\r",
                    "        me.editor.container.removeClass(\"ckefail\");\r",
                    "    }\r",
                    "\r",
                    "}"
                ],
                "name": "errorchange",
                "scope": "me"
            },
            "name": "onTextareafieldErrorChange",
            "designerId": "469df81b-6f4f-4b44-aea4-29db38e871a0"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|params": [
                    "readOnly"
                ],
                "fn": "setReadOnly",
                "implHandler": [
                    "try {\r",
                    "    var me = this,\r",
                    "        inputEl = me.inputEl;\r",
                    "    readOnly = !!readOnly;\r",
                    "    me[readOnly ? 'addCls' : 'removeCls'](me.readOnlyCls);\r",
                    "    me.readOnly = readOnly;\r",
                    "    if (inputEl) {\r",
                    "        inputEl.dom.readOnly = readOnly;\r",
                    "    } else if (me.rendering) {\r",
                    "        me.setReadOnlyOnBoxReady = true;\r",
                    "    }\r",
                    "    me.fireEvent('writeablechange', me, readOnly);\r",
                    "    me.editor.setReadOnly(readOnly);\r",
                    "} catch (err){\r",
                    "    console.log(\"ckeditor readonly anomaly\");\r",
                    "}"
                ]
            },
            "name": "setReadOnly",
            "designerId": "def3f505-9766-4202-a65e-6c79ac7a43f7"
        }
    ]
}