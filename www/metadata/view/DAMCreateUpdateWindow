{
    "type": "window",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "designer|userClassName": "DAMCreateUpdateWindow",
        "designer|userAlias": "DAMCreateUpdateWindow",
        "requires": [
            "Ext.ux.TreePicker"
        ],
        "floating": true,
        "height": 500,
        "id": "DAMCreateUpdateWindow",
        "width": 900,
        "layout": "fit",
        "iconCls": "mediaTypes",
        "title": "Nouveau média",
        "constrainHeader": true,
        "maximizable": false,
        "modal": true
    },
    "configAlternates": {
        "resizable": "boolean"
    },
    "id": "ExtBox1-ext-gen11144",
    "designerId": "939ef002-62e9-4ca0-a15f-a368fcab7385",
    "cn": [
        {
            "type": "linkedinstance",
            "reference": {
                "name": "tools",
                "type": "array"
            },
            "codeClass": null,
            "designerId": "535d186b-c92e-4a59-86ab-42cd2799b34a",
            "masterInstanceId": "ExtBox1-ext-gen2736"
        },
        {
            "type": "panel",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|userClassName": "MyPanel46",
                "layout": "fit",
                "title": ""
            },
            "designerId": "abd8c9ac-e736-40ef-9bd7-5d467d7e0259",
            "cn": [
                {
                    "type": "form",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "designer|userClassName": "MyForm3",
                        "height": 101,
                        "id": "DAMFieldBox",
                        "overflowY": "auto",
                        "bodyPadding": 10,
                        "title": ""
                    },
                    "designerId": "76120e34-b5c1-40a3-9536-1168e395f143",
                    "cn": [
                        {
                            "type": "container",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "designer|userClassName": "ChampTC",
                                "designer|userAlias": "ChampTC",
                                "designer|displayName": null,
                                "padding": 10,
                                "layout": "anchor"
                            },
                            "designerId": "93fa1895-60c7-4fd4-8996-ffdf20b6612d",
                            "cn": [
                                {
                                    "type": "textfield",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "layout|anchor": "90%",
                                        "designer|userClassName": "MyTextField1",
                                        "style": [
                                            "{float:left}"
                                        ],
                                        "name": "title",
                                        "fieldLabel": "Titre *",
                                        "labelSeparator": " ",
                                        "allowBlank": false
                                    },
                                    "designerId": "05d25a1f-a063-44bc-8b95-e2d6afeeaeaa"
                                },
                                {
                                    "type": "button",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "designer|userClassName": "MyButton17",
                                        "itemId": "helpBouton",
                                        "margin": null,
                                        "style": [
                                            "{float:right;}"
                                        ],
                                        "allowDepress": null,
                                        "enableToggle": null,
                                        "handleMouseEvents": false,
                                        "iconCls": "help",
                                        "pressed": null,
                                        "pressedCls": "x-btn",
                                        "text": "",
                                        "tooltip": [
                                            "'Titre du média. Obligatoire.'"
                                        ]
                                    },
                                    "designerId": "8a51a2c7-d9be-41e3-9282-a43ccad81b59"
                                }
                            ]
                        },
                        {
                            "type": "container",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "designer|userClassName": "ChampTC",
                                "designer|userAlias": "ChampTC",
                                "designer|displayName": null,
                                "padding": 10,
                                "layout": "anchor"
                            },
                            "designerId": "07fd700e-f2c9-4d2b-af48-91b2c3fdd39d",
                            "cn": [
                                {
                                    "type": "filefield",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "layout|anchor": "90%",
                                        "designer|userClassName": "MyFileUpload3",
                                        "style": [
                                            "{float:left}"
                                        ],
                                        "name": "originalFile",
                                        "fieldLabel": "Fichier original *",
                                        "labelSeparator": " ",
                                        "allowBlank": false
                                    },
                                    "designerId": "f7e05e8c-0cef-4bd0-8132-178a1d685c9e"
                                },
                                {
                                    "type": "button",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "designer|userClassName": "MyButton17",
                                        "itemId": "helpBouton",
                                        "margin": null,
                                        "style": [
                                            "{float:right;}"
                                        ],
                                        "allowDepress": null,
                                        "enableToggle": null,
                                        "handleMouseEvents": false,
                                        "iconCls": "help",
                                        "pressed": null,
                                        "pressedCls": "x-btn",
                                        "text": "",
                                        "tooltip": [
                                            "'Fichier principal du média. Obligatoire.'"
                                        ]
                                    },
                                    "designerId": "8f26dbc9-7440-449a-837c-d600f17da51f"
                                }
                            ]
                        },
                        {
                            "type": "fieldset",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "designer|userClassName": "MyFieldSet18",
                                "id": "DAMTaxoBox",
                                "title": "Taxonomie"
                            },
                            "designerId": "5c318346-e147-484f-a9a0-56561f2f7a6b"
                        },
                        {
                            "type": "button",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "layout|anchor": "100%",
                                "designer|userClassName": "MyButton208",
                                "id": "DAMSubmitBtn",
                                "scale": "large",
                                "text": "Créer ce nouveau média"
                            },
                            "designerId": "98af620d-4c93-4c3b-8225-5330617d10a2",
                            "cn": [
                                {
                                    "type": "basiceventbinding",
                                    "reference": {
                                        "name": "listeners",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "designer|userClassName": "onDAMSubmitBtnClick",
                                        "fn": "onDAMSubmitBtnClick",
                                        "implHandler": [
                                            "button.up().setLoading(true);\r",
                                            "var form=button.up().getForm();\r",
                                            "form.submit({\r",
                                            "    clientValidation: true,\r",
                                            "    url: 'dam/create',\r",
                                            "    params: { \r",
                                            "        typeId: Ext.getCmp(\"DAMMTGrid\").getSelectionModel().getLastSelected().get(\"id\")\r",
                                            "    },\r",
                                            "    success: function(form, action) {\r",
                                            "        button.up().setLoading(false);\r",
                                            "        button.up().up().up().close();\r",
                                            "        Ext.getStore(\"DAMStore\").reload();\r",
                                            "    },\r",
                                            "    failure: function(form, action) {\r",
                                            "        button.up().setLoading(false);\r",
                                            "        switch (action.failureType) {\r",
                                            "            case Ext.form.action.Action.CLIENT_INVALID:\r",
                                            "            Ext.Msg.alert('Erreur', 'Certains champs sont invalides');\r",
                                            "            break;\r",
                                            "            case Ext.form.action.Action.CONNECT_FAILURE:\r",
                                            "            Ext.Msg.alert('Erreur', 'Erreur Ajax');\r",
                                            "            break;\r",
                                            "            case Ext.form.action.Action.SERVER_INVALID:\r",
                                            "            Ext.Msg.alert('Erreur', action.result.msg);\r",
                                            "        }\r",
                                            "    }\r",
                                            "});\r",
                                            ""
                                        ],
                                        "name": "click",
                                        "scope": "me"
                                    },
                                    "designerId": "2c59e09e-e987-4ff8-a3b6-df000c0a11c7"
                                }
                            ]
                        }
                    ]
                }
            ]
        }
    ]
}