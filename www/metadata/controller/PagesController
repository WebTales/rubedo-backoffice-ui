{
    "type": "Ext.app.Controller",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "designer|userClassName": "PagesController",
        "designer|userAlias": "PagesController"
    },
    "designerId": "b29235f7-9588-4632-b7ab-b0f2633b21ec",
    "cn": [
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "pageSiteSelect",
                "implHandler": [
                    "Ext.getStore(\"PagesDataStore\").getProxy().extraParams.filter=\"[{\\\"property\\\":\\\"site\\\",\\\"value\\\":\\\"\"+records[0].get(\"id\")+\"\\\"}]\";\r",
                    "Ext.getStore(\"PagesDataStore\").load();\r",
                    "Ext.getStore(\"MasksComboStore\").getProxy().extraParams.filter=\"[{\\\"property\\\":\\\"site\\\",\\\"value\\\":\\\"\"+records[0].get(\"id\")+\"\\\"}]\";\r",
                    "Ext.getStore(\"MasksComboStore\").load();\r",
                    "var filArianne = combo.up().up().up().getDockedComponent('filArianne');\r",
                    "var typeFil = filArianne.getComponent('type');\r",
                    "if (Ext.isDefined(typeFil)) {typeFil.setText(records[0].get(\"text\"));}\r",
                    "else { typeFil= Ext.widget('button',{iconCls: \"masque-icon\", text:records[0].get(\"text\")+\"<b> ></b>\", itemId:'type'});\r",
                    "typeFil.on(\"click\", function(){Ext.getCmp(\"mainPageTree\").getSelectionModel().select(Ext.getCmp(\"mainPageTree\").getRootNode());});\r",
                    "filArianne.insert(1,typeFil);\r",
                    "}\r",
                    "Ext.getCmp(\"pageTreeBreadcrumb\").removeAll();\r",
                    "Ext.getCmp(\"addPageBtn\").enable();\r",
                    "Ext.getCmp(\"removePageBtn\").disable();\r",
                    "Ext.Array.forEach(Ext.getCmp(\"contributionPages\").getComponent(\"contextBar\").query(\"buttongroup\"), function(btn){btn.disable();});\r",
                    "Ext.getCmp(\"mainPageEdition\").removeAll();\r",
                    "this.resetInterface();"
                ],
                "name": "select",
                "scope": "me",
                "designer|targetType": "Ext.form.field.ComboBox",
                "designer|controlQuery": "#pagesSitesCombo"
            },
            "designerId": "7f866395-6912-493e-b496-40113840a82e"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "openPageAddWindow",
                "implHandler": [
                    "Ext.widget(\"newPageWindow\").show();"
                ],
                "name": "click",
                "scope": "me",
                "designer|targetType": "Ext.button.Button",
                "designer|controlQuery": "#addPageBtn"
            },
            "designerId": "cb9367d6-8b6d-41dd-a7d1-4a4ad74d5b92"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "createNewPage",
                "implHandler": [
                    "var me=this;\r",
                    "var form=button.up().getForm();\r",
                    "var target=Ext.getCmp(\"mainPageTree\").getSelectionModel().getLastSelected();\r",
                    "if (Ext.isEmpty(target)) {\r",
                    "    target=Ext.getCmp(\"mainPageTree\").getRootNode();\r",
                    "}\r",
                    "if (form.isValid()){\r",
                    "    var newPage=form.getValues();\r",
                    "    newPage.blocks=[ ];\r",
                    "    newPage.expandable=false;\r",
                    "\r",
                    "    newPage.iconCls=\"masque-icon\";\r",
                    "    newPage.site=Ext.getCmp(\"pagesSitesCombo\").getValue();\r",
                    "    newPage.inheritWorkspace=true;\r",
                    "    newPage.i18n={ };\r",
                    "    var nativeLanguage=Ext.getCmp(\"workingLanguageField\").getValue();\r",
                    "    newPage.nativeLanguage=nativeLanguage;\r",
                    "    newPage.i18n[nativeLanguage]={text:form.getValues().title, title:form.getValues().title, pageURL:me.removeDiacritics(form.getValues().title.replace(/ /g, \"-\").toLowerCase())};\r",
                    "    var store=Ext.getCmp(\"mainPageTree\").getStore();\r",
                    "    store.suspendAutoSync();\r",
                    "    target.set(\"expandable\",true);\r",
                    "    target.expand(false, function(){\r",
                    "        if (!target.hasChildNodes()){\r",
                    "            newPage.orderValue=100;\r",
                    "        } else {\r",
                    "            newPage.orderValue=target.lastChild.get(\"orderValue\")+100;\r",
                    "        }\r",
                    "        target.appendChild(newPage);\r",
                    "        store.resumeAutoSync();\r",
                    "        store.sync();        \r",
                    "        button.up().up().close();\r",
                    "    });\r",
                    "\r",
                    "}"
                ],
                "name": "click",
                "scope": "me",
                "designer|targetType": "Ext.button.Button",
                "designer|controlQuery": "#newPageSubmitBtn"
            },
            "designerId": "58437311-2357-4c3b-99f1-a0fa5762da47"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "deletePage",
                "implHandler": [
                    "var me=this;\r",
                    "var target=Ext.getCmp(\"mainPageTree\").getSelectionModel().getLastSelected();\r",
                    "if (Ext.isDefined(target)) {\r",
                    "    Ext.Ajax.request({\r",
                    "        url: 'pages/holds-site-default',\r",
                    "        params: {\r",
                    "            id: target.get('id')\r",
                    "        },\r",
                    "        success: function(response){\r",
                    "            var answer = Ext.JSON.decode(response.responseText);\r",
                    "            if (answer.holdsDefault){\r",
                    "                Ext.Msg.alert(Rubedo.RubedoAutomatedElementsLoc.errorTitle,Rubedo.RubedoAutomatedElementsLoc.pageHoldsDefaultError);\r",
                    "            } else {\r",
                    "                var delCon = Ext.widget('delConfirmZ');\r",
                    "                delCon.specificMessage=Rubedo.RubedoAutomatedElementsLoc.thisPageText;\r",
                    "                delCon.show();\r",
                    "                var store=Ext.getCmp(\"mainPageTree\").getStore();\r",
                    "                Ext.getCmp('delConfirmZOui').on('click', function() { \r",
                    "                    store.suspendAutoSync();\r",
                    "                    var myParent=target.parentNode;\r",
                    "                    if ((myParent.childNodes.length==1)&&(!myParent.isRoot())){\r",
                    "                        myParent.set(\"expandable\",false);\r",
                    "                    }\r",
                    "                    target.remove();\r",
                    "                    store.resumeAutoSync();\r",
                    "                    store.sync();\r",
                    "                    Ext.getCmp(\"addPageBtn\").enable();\r",
                    "                    Ext.getCmp(\"removePageBtn\").disable();\r",
                    "                    Ext.Array.forEach(Ext.getCmp(\"contributionPages\").getComponent(\"contextBar\").query(\"buttongroup\"), function(btn){btn.disable();});\r",
                    "                    Ext.getCmp(\"mainPageEdition\").removeAll();\r",
                    "                    Ext.getCmp('delConfirmZ').close();\r",
                    "                    me.resetInterface();\r",
                    "                });\r",
                    "            }\r",
                    "        },\r",
                    "        failure:function(){\r",
                    "            Ext.Msg.alert(Rubedo.RubedoAutomatedElementsLoc.errorTitle,Rubedo.RubedoAutomatedElementsLoc.pageHoldsDefaultServerError);\r",
                    "\r",
                    "        }\r",
                    "    });\r",
                    "\r",
                    "\r",
                    "}"
                ],
                "name": "click",
                "scope": "me",
                "designer|targetType": "Ext.button.Button",
                "designer|controlQuery": "#removePageBtn"
            },
            "designerId": "054b6624-59d6-425e-8c55-a8dc5ed95e57"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "pageSelect",
                "implHandler": [
                    "Ext.getStore(\"PageDisplayedContentsStore\").removeAll();\r",
                    "var me=this;\r",
                    "if (!record.isRoot()){\r",
                    "    if (Ext.getCmp(\"pageContentDisplayer\").up().activeTab.id==\"pageContentDisplayer\"){\r",
                    "        Ext.getCmp(\"pageContentDisplayer\").fireEvent(\"activate\", Ext.getCmp(\"pageContentDisplayer\"));\r",
                    "    }\r",
                    "    Ext.getCmp(\"removePageBtn\").enable();\r",
                    "    Ext.Array.forEach(Ext.getCmp(\"contributionPages\").getComponent(\"contextBar\").query(\"buttongroup\"), function(btn){btn.enable();});\r",
                    "\r",
                    "    Ext.getCmp(\"mainPageEdition\").removeAll();\r",
                    "    var myMask =Ext.getStore(\"MasksComboStore\").findRecord(\"id\", record.get(\"maskId\")); \r",
                    "    Ext.suspendLayouts();\r",
                    "    me.renderPage(Ext.clone(myMask.get(\"rows\")),1,Ext.getCmp(\"mainPageEdition\"));\r",
                    "    me.renderBlocks(Ext.clone(myMask.get(\"blocks\")), false);\r",
                    "    me.renderBlocks(Ext.clone(record.get(\"blocks\")), true);\r",
                    "    me.resetInterface();\r",
                    "    Ext.resumeLayouts();\r",
                    "    Ext.getCmp(\"pageMaskDisplayBtn\").setText(Rubedo.RubedoAutomatedElementsLoc.associatedMaskText+\" : \"+myMask.get(\"text\"));\r",
                    "    Ext.getCmp(\"pageMaskDisplayBtn\").show();\r",
                    "    var valueSetter=Ext.clone(record.getData());\r",
                    "    try {\r",
                    "        Ext.apply(valueSetter, valueSetter.i18n[record.get('locale')]);\r",
                    "    } catch(err) {console.log(\"page i18n fail\");}\r",
                    "        Ext.getCmp(\"mainPageAttributeForm\").getForm().setValues(valueSetter);\r",
                    "        Ext.getCmp(\"pagesDLSToolbar\").recievei18n(record.get('i18n'),record.get('locale'),record.get(\"nativeLanguage\"));\r",
                    "        Ext.Array.forEach(Ext.getCmp(\"mainPageAttributeForm\").query(\"field\"), function(field){\r",
                    "            field.setReadOnly(false);\r",
                    "        });\r",
                    "        Ext.Ajax.request({\r",
                    "            url: 'xhr-get-page-url',\r",
                    "            params: {\r",
                    "                \"page-id\": record.get(\"id\"),\r",
                    "                \"locale\": Ext.getCmp(\"pagesDLSToolbar\").getComponent(0).getValue()\r",
                    "            },\r",
                    "            success: function(response){\r",
                    "                var targetedUrl = Ext.JSON.decode(response.responseText).url;\r",
                    "                Ext.getCmp(\"pagesInternalPreview\").add(Ext.widget(\"component\",{\r",
                    "                    autoEl: {\r",
                    "                        tag: 'iframe',\r",
                    "                        src: targetedUrl+\"?preview=1\"\r",
                    "                    }\r",
                    "                }));\r",
                    "            },\r",
                    "            failure:function(){\r",
                    "                Ext.Msg.alert(Rubedo.RubedoAutomatedElementsLoc.errorTitle, Rubedo.RubedoAutomatedElementsLoc.pageURLRecoveryError);\r",
                    "            }\r",
                    "        });\r",
                    "\r",
                    "        Ext.getCmp(\"pagePreviewTextItem\").setText(Rubedo.RubedoAutomatedElementsLoc.pagePreviewText+\" \"+Ext.Date.format(new Date(), 'F j, Y, G:i '));\r",
                    "        var metaBox = Ext.getCmp(\"contributionPages\").getDockedComponent('barreMeta').getComponent('boiteBarreMeta');\r",
                    "        var values= record.getData();\r",
                    "        values.creation= Ext.Date.format(values.createTime, Ext.Date.defaultFormat);\r",
                    "        values.derniereModification= Ext.Date.format(values.lastUpdateTime, Ext.Date.defaultFormat);\r",
                    "        metaBox.update(values);\r",
                    "        metaBox.show();\r",
                    "        Ext.getCmp(\"addPageBtn\").enable();\r",
                    "        if((!ACL.interfaceRights[\"write.ui.pages\"])||(record.get(\"readOnly\"))){\r",
                    "            Ext.getCmp(\"removePageBtn\").disable();\r",
                    "            Ext.getCmp(\"addPageBtn\").disable();\r",
                    "            Ext.getCmp(\"contributionPages\").getComponent(\"contextBar\").query(\"buttongroup\")[0].disable();\r",
                    "            Ext.getCmp(\"contributionPages\").getComponent(\"contextBar\").query(\"buttongroup\")[2].disable();\r",
                    "            Ext.Array.forEach(Ext.getCmp(\"mainPageAttributeForm\").query(\"field\"), function(field){\r",
                    "                field.setReadOnly(true);\r",
                    "            });\r",
                    "        }\r",
                    "    } else {\r",
                    "        Ext.getCmp(\"addPageBtn\").enable();\r",
                    "        Ext.getCmp(\"removePageBtn\").disable();\r",
                    "        Ext.Array.forEach(Ext.getCmp(\"contributionPages\").getComponent(\"contextBar\").query(\"buttongroup\"), function(btn){btn.disable();});\r",
                    "        Ext.getCmp(\"mainPageEdition\").removeAll();\r",
                    "        me.resetInterface();\r",
                    "        Ext.getCmp(\"addPageBtn\").enable();\r",
                    "    }\r",
                    "    var arButtons = [ ];\r",
                    "    me.breadcrumbBuilder(record,arButtons);\r",
                    "    Ext.getCmp(\"pageTreeBreadcrumb\").removeAll();\r",
                    "    Ext.getCmp(\"pageTreeBreadcrumb\").add(arButtons.reverse());"
                ],
                "name": "select",
                "scope": "me",
                "designer|targetType": "Ext.tree.Panel",
                "designer|controlQuery": "#mainPageTree"
            },
            "designerId": "16f72b7e-ea83-4f98-97e0-5e5f729e2d85"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "moveElementUp",
                "implHandler": [
                    "var target=Ext.getCmp(Ext.getCmp('pageElementIdField').getValue());\r",
                    "if (!Ext.isEmpty(target)) {\r",
                    "    var pos = target.up().items.indexOf(target);\r",
                    "    if (pos > 0) {\r",
                    "        target.up().move(pos,pos-1);\r",
                    "        if (Ext.isEmpty(target.previousSibling())){\r",
                    "            target.orderValue=target.nextSibling().orderValue-1;\r",
                    "        } else {\r",
                    "            target.orderValue=(target.nextSibling().orderValue+target.previousSibling().orderValue)/2;\r",
                    "        }\r",
                    "    }\r",
                    "}"
                ],
                "name": "click",
                "scope": "me",
                "designer|targetType": "Ext.button.Button",
                "designer|controlQuery": "#pageElementUp"
            },
            "designerId": "420ce9f1-454c-4f4c-8647-48c6790b0b34"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "moveElementDown",
                "implHandler": [
                    "var target=Ext.getCmp(Ext.getCmp('pageElementIdField').getValue());\r",
                    "if (!Ext.isEmpty(target)) {\r",
                    "    if (!Ext.isEmpty(target.nextSibling())){\r",
                    "        var pos = target.up().items.indexOf(target);\r",
                    "        target.up().move(pos,pos+1);\r",
                    "        if (Ext.isEmpty(target.nextSibling())){\r",
                    "            target.orderValue=target.previousSibling().orderValue+1;\r",
                    "        } else {\r",
                    "            target.orderValue=(target.nextSibling().orderValue+target.previousSibling().orderValue)/2;\r",
                    "        }\r",
                    "    }\r",
                    "\r",
                    "}"
                ],
                "name": "click",
                "scope": "me",
                "designer|targetType": "Ext.button.Button",
                "designer|controlQuery": "#pageElementDown"
            },
            "designerId": "901daf12-1778-4e89-ac53-1b8020101121"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "deleteElement",
                "implHandler": [
                    "var target=Ext.getCmp(Ext.getCmp('pageElementIdField').getValue());\r",
                    "target.destroy();\r",
                    "Ext.getCmp(\"newPageBloc\").disable();\r",
                    "Ext.getCmp(\"deletePageElement\").disable();\r",
                    "Ext.getCmp(\"addPageBtn\").disable();\r",
                    "Ext.getCmp(\"pageElementUp\").disable();\r",
                    "Ext.getCmp(\"pageElementDown\").disable();\r",
                    "Ext.getCmp('pageElementPropsPanel').removeAll();\r",
                    "Ext.getCmp('pageElementPropsPanel').setTitle(Rubedo.RubedoAutomatedElementsLoc.selectAnElementText);\r",
                    "Ext.getCmp('pageElementPropsPanel').setIconCls();\r",
                    "Ext.getCmp('pageElementIdField').setValue();"
                ],
                "name": "click",
                "scope": "me",
                "designer|targetType": "Ext.button.Button",
                "designer|controlQuery": "#deletePageElement"
            },
            "designerId": "a13fbc2a-6370-487c-86d0-5d282a58dd1c"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "renderPage",
                "designer|params": [
                    "mRows",
                    "its",
                    "cible"
                ],
                "implHandler": [
                    "var me=this;\r",
                    "Ext.Array.forEach(mRows, function(row){\r",
                    "\r",
                    "    if (row.id.indexOf(\"page-\")==-1) {\r",
                    "        row.id=\"page-\"+row.id;\r",
                    "    }\r",
                    "    var newRow = Ext.widget('panel', {\r",
                    "        header:false,\r",
                    "        mType:\"row\",\r",
                    "        eTitle:row.eTitle,\r",
                    "        id:row.id,\r",
                    "        responsive:row.responsive,\r",
                    "        classHTML:row.classHTML,\r",
                    "        idHTML:row.idHTML,\r",
                    "        displayTitle:row.displayTitle,\r",
                    "        margin:4,\r",
                    "        layout: {\r",
                    "            type: 'hbox',\r",
                    "            align: 'stretch'\r",
                    "        }\r",
                    "    });\r",
                    "    var rFlex=1;\r",
                    "    var eolWidth=12;\r",
                    "    Ext.Array.forEach(row.columns, function(column){\r",
                    "        if (column.offset>0) {\r",
                    "            newRow.add(Ext.widget('container', {\r",
                    "                flex:column.offset,\r",
                    "                style:\"{background-image:url(resources/images/stripes.png);}\"\r",
                    "            }));\r",
                    "            eolWidth=eolWidth-column.offset;\r",
                    "        }\r",
                    "        var isFinalCol=false;\r",
                    "        if (its<=0){isFinalCol=true;}\r",
                    "\r",
                    "        if (column.id.indexOf(\"page-\")==-1) {\r",
                    "            column.id=\"page-\"+column.id;\r",
                    "        }\r",
                    "        var newCol=Ext.widget('panel', {\r",
                    "            header:false,\r",
                    "            flex:column.span,\r",
                    "            final:isFinalCol,\r",
                    "            mType:'col',\r",
                    "            id:column.id,\r",
                    "            eTitle:column.eTitle,\r",
                    "            responsive:column.responsive,\r",
                    "            classHTML:column.classHTML,\r",
                    "            displayTitle:column.displayTitle,\r",
                    "            idHTML:column.idHTML,\r",
                    "            margin:4,\r",
                    "            layout: {\r",
                    "                type: 'vbox',\r",
                    "                align: 'stretch'\r",
                    "            }\r",
                    "        });\r",
                    "        if ((its>0)&&(column.isTerminal===false)) {\r",
                    "            rFlex=Ext.Array.max([rFlex,column.rows.length]);\r",
                    "            me.renderPage(column.rows,its-1,newCol);    \r",
                    "        }\r",
                    "\r",
                    "        eolWidth=eolWidth-column.span;\r",
                    "        newRow.add(newCol);\r",
                    "\r",
                    "    });\r",
                    "    newRow.add(Ext.widget(\"container\",{\r",
                    "        flex:eolWidth,\r",
                    "        itemId:\"eol\"\r",
                    "    }));\r",
                    "    if (Ext.isEmpty(row.height)) {\r",
                    "        newRow.flex=rFlex;\r",
                    "    } else {\r",
                    "        newRow.height=row.height;\r",
                    "    }\r",
                    "    cible.add(newRow);  \r",
                    "\r",
                    "\r",
                    "});"
                ]
            },
            "designerId": "3cbb5b15-cb09-4ba6-8385-f01b8ab94a69"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "columnSelector",
                "implHandler": [
                    "if ((component.mType==\"col\")&&((Ext.isEmpty(component.items.items))||(component.items.items[0].isXType(\"unBloc\")))){\r",
                    "    component.addBodyCls('contrastBorder');\r",
                    "    component.addBodyCls('contrastRow');\r",
                    "    component.getEl().on(\"mouseover\", function(e){\r",
                    "        component.setBorder(4);\r",
                    "        e.stopEvent();\r",
                    "    });\r",
                    "    component.getEl().on(\"mouseout\", function(e){\r",
                    "        component.setBorder(2);\r",
                    "        e.stopEvent();\r",
                    "    });\r",
                    "    component.getEl().on(\"click\", function(e){\r",
                    "        var prevSelected = Ext.getCmp(Ext.getCmp('pageElementIdField').getValue());\r",
                    "        if (!Ext.isEmpty(prevSelected)) {\r",
                    "            if (prevSelected.isXType(\"unBloc\")) {prevSelected.setIconCls();} else {\r",
                    "        prevSelected.removeBodyCls('selectedelement');}\r",
                    "    }\r",
                    "    component.addBodyCls('selectedelement');\r",
                    "    this.frame(MyPrefData.themeColor);\r",
                    "    Ext.getCmp('pageElementIdField').setValue(component.id);\r",
                    "    Ext.getCmp(\"newPageBloc\").enable();\r",
                    "    Ext.getCmp(\"deletePageElement\").disable();\r",
                    "    Ext.getCmp(\"pageElementUp\").disable();\r",
                    "    Ext.getCmp(\"pageElementDown\").disable();\r",
                    "    var propEdit=Ext.getCmp('pageElementPropsPanel');\r",
                    "    propEdit.removeAll();\r",
                    "    propEdit.setTitle(Rubedo.RubedoAutomatedElementsLoc.columnText);\r",
                    "    propEdit.setIconCls('editZone');\r",
                    "    e.stopEvent();\r",
                    "});\r",
                    "}"
                ],
                "name": "render",
                "scope": "me",
                "designer|targetType": "Ext.panel.Panel",
                "designer|controlQuery": "#mainPageEdition panel"
            },
            "designerId": "590c326a-45be-408d-8b0a-e3b354401fa7"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "resetInterface",
                "implHandler": [
                    "Ext.getCmp(\"newPageBloc\").disable();\r",
                    "Ext.getCmp(\"deletePageElement\").disable();\r",
                    "Ext.getCmp(\"addPageBtn\").disable();\r",
                    "Ext.getCmp(\"pageElementUp\").disable();\r",
                    "Ext.getCmp(\"pageElementDown\").disable();\r",
                    "Ext.getCmp('pageElementPropsPanel').removeAll();\r",
                    "Ext.getCmp('pageElementPropsPanel').setTitle(Rubedo.RubedoAutomatedElementsLoc.selectAnElementText);\r",
                    "Ext.getCmp('pageElementPropsPanel').setIconCls();\r",
                    "Ext.getCmp('pageElementIdField').setValue();\r",
                    "Ext.getCmp(\"pagesInternalPreview\").removeAll();\r",
                    "Ext.getCmp(\"pageMaskDisplayBtn\").hide();\r",
                    "Ext.getCmp(\"mainPageAttributeForm\").getForm().setValues();\r",
                    "Ext.getCmp(\"mainPageAttributeForm\").getForm().reset();\r",
                    "Ext.getCmp(\"pagePreviewTextItem\").setText();\r",
                    "Ext.getCmp(\"contributionPages\").getDockedComponent('barreMeta').getComponent('boiteBarreMeta').hide();"
                ]
            },
            "designerId": "0a4fb2d5-4c36-4c28-a7fb-b362837242c5"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "showBlocAddWindow",
                "implHandler": [
                    "Ext.widget(\"ajoutBlocFenetre\").show();\r",
                    "Ext.getCmp(\"boutonAjouterBloc\").hide();\r",
                    "Ext.getCmp(\"addPageBlocBtn\").show();\r",
                    "Ext.getCmp(\"BlocsSelectGrid\").pageMode=true;"
                ],
                "name": "click",
                "scope": "me",
                "designer|targetType": "Ext.button.Button",
                "designer|controlQuery": "#newPageBloc"
            },
            "designerId": "7c7346db-dfbe-4691-ab04-fb477ab4085e"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "insertBloc",
                "implHandler": [
                    "var donnees = Ext.getCmp('BlocsSelectGrid').getSelectionModel().getLastSelected().data;\r",
                    "var configurator = Ext.clone(donnees.configBasique);\r",
                    "if (Ext.isEmpty(configurator.configBloc)){\r",
                    "    configurator.configBloc={ };\r",
                    "}\r",
                    "delete configurator.champsConfig;\r",
                    "var nouvBloc = Ext.widget('unBloc', configurator);\r",
                    "nouvBloc.responsive={\r",
                    "    \"phone\":true,\r",
                    "    \"tablet\":true,\r",
                    "    \"desktop\":true\r",
                    "};\r",
                    "nouvBloc.canEdit=true;\r",
                    "nouvBloc.elementStyle=\"\";\r",
                    "nouvBloc.elementTag=\"div\";\r",
                    "nouvBloc.renderDiv=true;\r",
                    "nouvBloc.flex=1;\r",
                    "\r",
                    "var target = Ext.getCmp(Ext.getCmp('pageElementIdField').getValue());\r",
                    "var orderValue = 1;\r",
                    "if (!Ext.isEmpty(target.items.items)) {\r",
                    "    orderValue=target.items.items[target.items.items.length-1].orderValue+1;\r",
                    "}\r",
                    "nouvBloc.orderValue=orderValue;\r",
                    "target.add(nouvBloc);\r",
                    "Ext.getCmp(\"ajoutBlocFenetre\").close();\r",
                    "nouvBloc.getEl().dom.click();"
                ],
                "name": "click",
                "scope": "me",
                "designer|targetType": "Ext.button.Button",
                "designer|controlQuery": "#addPageBlocBtn"
            },
            "designerId": "37a082a3-056b-4f6c-ba17-9503a4c3bdae"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "blocSelection",
                "implHandler": [
                    "if (component.canEdit){\r",
                    "    component.getEl().on(\"mouseover\", function(e){\r",
                    "        var prevSelected = Ext.getCmp(Ext.getCmp('pageElementIdField').getValue());\r",
                    "        if ((Ext.isEmpty(prevSelected))||(prevSelected.id!==component.id)) {\r",
                    "            component.setIconCls('selectBloc');\r",
                    "        }\r",
                    "        e.stopEvent();\r",
                    "    });\r",
                    "    component.getEl().on(\"mouseout\", function(e){\r",
                    "        var prevSelected = Ext.getCmp(Ext.getCmp('pageElementIdField').getValue());\r",
                    "        if ((Ext.isEmpty(prevSelected))||(prevSelected.id!==component.id)) {\r",
                    "        component.setIconCls();}\r",
                    "        e.stopEvent();\r",
                    "    });\r",
                    "    component.getEl().on(\"click\", function(e){\r",
                    "        var prevSelected = Ext.getCmp(Ext.getCmp('pageElementIdField').getValue());\r",
                    "        if (!Ext.isEmpty(prevSelected)) {\r",
                    "            if (prevSelected.isXType(\"unBloc\")) {prevSelected.setIconCls();} else {\r",
                    "        prevSelected.removeBodyCls('selectedelement');}\r",
                    "    }\r",
                    "    component.setIconCls('editBloc');\r",
                    "    Ext.getCmp(\"newPageBloc\").disable();\r",
                    "    Ext.getCmp(\"deletePageElement\").enable();\r",
                    "    Ext.getCmp(\"pageElementUp\").enable();\r",
                    "    Ext.getCmp(\"pageElementDown\").enable();\r",
                    "    this.frame(MyPrefData.themeColor);\r",
                    "    Ext.getCmp('pageElementIdField').setValue(component.id);\r",
                    "    var propEdit=Ext.getCmp('pageElementPropsPanel');\r",
                    "    try{\r",
                    "        propEdit.setTitle(Rubedo.RubedoAutomatedElementsLoc.blockText+\" \"+Ext.getStore(\"BlocsDataStore\").findRecord('bType', component.bType,0,false,false,true).get(\"type\"));\r",
                    "    }catch(err){\r",
                    "        propEdit.setTitle(component.id.replace(\"unBloc\", \"Bloc\"));\r",
                    "    }\r",
                    "    propEdit.setIconCls('editBloc');\r",
                    "    propEdit.removeAll();\r",
                    "    var configSpec = Ext.widget('ConfigSpecBloc');\r",
                    "\r",
                    "\r",
                    "\r",
                    "    configSpec.getComponent(0).add(Ext.widget('genericLocTextField',{\r",
                    "        fieldLabel:Rubedo.RubedoAutomatedElementsLoc.titleText,\r",
                    "        labelWidth:60,\r",
                    "        anchor:\"100%\",\r",
                    "        margin:\"10 0 10 0\",\r",
                    "        targetEntity:component.getId(),\r",
                    "        targetEntityProp:\"title\",\r",
                    "        initialLanguage:Ext.getCmp(\"workingLanguageField\").getValue()\r",
                    "    }));\r",
                    "    configSpec.getComponent(0).add(Ext.widget('checkbox',{\r",
                    "        itemId:\"eTitleShowField\",\r",
                    "        fieldLabel:Rubedo.RubedoAutomatedElementsLoc.displayTitleText,\r",
                    "        onChange:function(){\r",
                    "\r",
                    "            component.displayTitle=this.getValue();\r",
                    "\r",
                    "        },\r",
                    "        labelWidth:60,\r",
                    "        inputValue:true,\r",
                    "        anchor:\"100%\",\r",
                    "        margin:\"10 0 10 0\",\r",
                    "        checked:component.displayTitle\r",
                    "    }));\r",
                    "\r",
                    "\r",
                    "\r",
                    "\r",
                    "    configSpec.getComponent(0).add(Ext.widget('checkboxgroup',{\r",
                    "        fieldLabel:Rubedo.RubedoAutomatedElementsLoc.visibilityText,\r",
                    "        anchor:\"100%\",\r",
                    "        labelWidth:60,\r",
                    "        margin:\"0 0 10 0\",\r",
                    "        vertical:true,\r",
                    "        columns:1,\r",
                    "        items: [\r",
                    "        { boxLabel: Rubedo.RubedoAutomatedElementsLoc.telephoneText, checked:component.responsive.phone, handler:function(){component.responsive.phone=this.getValue();} },\r",
                    "        { boxLabel: Rubedo.RubedoAutomatedElementsLoc.tabletText,checked:component.responsive.tablet, handler:function(){component.responsive.tablet=this.getValue();}},\r",
                    "        { boxLabel: Rubedo.RubedoAutomatedElementsLoc.computerText,checked:component.responsive.desktop, handler:function(){component.responsive.desktop=this.getValue();}}\r",
                    "        ]\r",
                    "\r",
                    "    }));  \r",
                    "    var languagesPicker = Ext.create(\"Ext.ux.form.field.BoxSelect\", {\r",
                    "        anchor:\"100%\",\r",
                    "        name:\"localeFilters\",\r",
                    "        labelWidth:70,\r",
                    "        fieldLabel:Rubedo.RubedoAutomatedElementsLoc.languagesText,\r",
                    "        multiSelect:true,\r",
                    "        forceSelection:true,\r",
                    "        store: Ext.getStore(\"AllLanguagesStore4\"),\r",
                    "        displayField:\"label\",\r",
                    "        valueField:\"locale\",\r",
                    "        plugins:[Ext.create(\"Ext.ux.form.field.ClearButton\")],\r",
                    "        queryMode:\"local\",\r",
                    "        \"labelTpl\": \"<img src=\\\"/assets/flags/16/{flagCode}.png\\\" style=\\\"height: 16px; vertical-align: middle; margin: 2px;\\\" /> {label}\",\r",
                    "        \"listConfig\": {\r",
                    "            \"tpl\": [\r",
                    "            \"<ul><tpl for=\\\".\\\">\",\r",
                    "            \"<li role=\\\"option\\\" class=\\\"x-boundlist-item\\\" style=\\\"background-image:url(/assets/flags/16/{flagCode}.png); background-repeat: no-repeat; background-size: 16px; padding-left: 16px;\\\">{label}</li>\",\r",
                    "            \"</tpl></ul>\"\r",
                    "            ]\r",
                    "        }\r",
                    "    });\r",
                    "    languagesPicker.on(\"change\",function(){\r",
                    "        var newValue=languagesPicker.getValue();\r",
                    "        if (Ext.isEmpty(newValue)){\r",
                    "            languagesPicker.setValue([\"all\"]);\r",
                    "        } else if((newValue.length>1)&&(Ext.Array.contains(newValue,\"all\"))){\r",
                    "            languagesPicker.setValue(Ext.Array.remove(newValue,\"all\"));\r",
                    "        }\r",
                    "        component.localeFilters=languagesPicker.getValue();\r",
                    "    });  \r",
                    "    if (Ext.isEmpty(component.localeFilters)){\r",
                    "        languagesPicker.setValue([\"all\"]);\r",
                    "    } else {\r",
                    "        languagesPicker.setValue(component.localeFilters);\r",
                    "    }\r",
                    "    if (Ext.getStore(\"AllLanguagesStore3\").getRange().length==1){\r",
                    "        languagesPicker.hide();\r",
                    "    }\r",
                    "    configSpec.getComponent(0).add(languagesPicker);\r",
                    "\r",
                    "\r",
                    "\r",
                    "\r",
                    "\r",
                    "    configSpec.getComponent(1).add(Ext.widget('textfield',{\r",
                    "        itemId:\"eClassHTMLField\",\r",
                    "        fieldLabel:Rubedo.RubedoAutomatedElementsLoc.HTMLClassText,\r",
                    "        onChange:function(){\r",
                    "            if (this.isValid()){\r",
                    "                component.classHTML=this.getValue();\r",
                    "            }\r",
                    "        },\r",
                    "        labelWidth:60,\r",
                    "        allowBlank:true,\r",
                    "        anchor:\"100%\",\r",
                    "        margin:\"10 0 0 0\",\r",
                    "        value:component.classHTML\r",
                    "    }));\r",
                    "\r",
                    "\r",
                    "\r",
                    "    configSpec.getComponent(1).add(Ext.widget('textfield',{\r",
                    "        itemId:\"eidHTMLField\",\r",
                    "        fieldLabel:Rubedo.RubedoAutomatedElementsLoc.HTMLIdText,\r",
                    "        onChange:function(){\r",
                    "            if (this.isValid()){\r",
                    "                component.idHTML=this.getValue();\r",
                    "            }\r",
                    "        },\r",
                    "        labelWidth:60,\r",
                    "        allowBlank:true,\r",
                    "        anchor:\"100%\",\r",
                    "        margin:\"10 0 0 0\",\r",
                    "        value:component.idHTML\r",
                    "    }));\r",
                    "\r",
                    "    configSpec.getComponent(1).add(Ext.widget('textfield',{\r",
                    "        itemId:\"urlPrefixHTMLField\",\r",
                    "        fieldLabel:Rubedo.RubedoAutomatedElementsLoc.URLPrefixText,\r",
                    "        onChange:function(){\r",
                    "            if (this.isValid()){\r",
                    "                component.urlPrefix=this.getValue();\r",
                    "            }\r",
                    "        },\r",
                    "        labelWidth:60,\r",
                    "        regex :new RegExp(/^([a-z]|[1-9]|[-]){0,}$/),\r",
                    "        allowBlank:true,\r",
                    "        anchor:\"100%\",\r",
                    "        margin:\"10 0 0 0\",\r",
                    "        value:component.urlPrefix\r",
                    "    }));\r",
                    "    configSpec.getComponent(1).add(Ext.widget('textfield',{\r",
                    "        itemId:\"eStyleField\",\r",
                    "        fieldLabel:Rubedo.RubedoAutomatedElementsLoc.styleText,\r",
                    "        onChange:function(){\r",
                    "            if (this.isValid()){\r",
                    "                component.elementStyle=this.getValue();\r",
                    "            }\r",
                    "        },\r",
                    "        labelWidth:60,\r",
                    "        allowBlank:true,\r",
                    "        anchor:\"100%\",\r",
                    "        margin:\"10 0 0 0\",\r",
                    "        value:component.elementStyle\r",
                    "    }));\r",
                    "    configSpec.getComponent(1).add(Ext.widget('combobox',{\r",
                    "        itemId:\"eTagField\",\r",
                    "        fieldLabel:Rubedo.RubedoAutomatedElementsLoc.tagText,\r",
                    "        queryMode:\"local\",\r",
                    "        store:[\"div\",\"span\",\"header\",\"section\",\"footer\",\"aside\"],\r",
                    "        onChange:function(){\r",
                    "            if (this.isValid()){\r",
                    "                component.elementTag=this.getValue();\r",
                    "            }\r",
                    "        },\r",
                    "        labelWidth:60,\r",
                    "        allowBlank:true,\r",
                    "        anchor:\"100%\",\r",
                    "        margin:\"10 0 0 0\",\r",
                    "        value:component.elementTag\r",
                    "    }));\r",
                    "    configSpec.getComponent(1).add(Ext.widget('checkbox',{\r",
                    "        itemId:\"eRenderDivField\",\r",
                    "        fieldLabel:Rubedo.RubedoAutomatedElementsLoc.displayInADivText,\r",
                    "        onChange:function(){\r",
                    "\r",
                    "            component.renderDiv=this.getValue();\r",
                    "\r",
                    "        },\r",
                    "        labelWidth:60,\r",
                    "        inputValue:true,\r",
                    "        anchor:\"100%\",\r",
                    "        margin:\"10 0 10 0\",\r",
                    "        checked:component.renderDiv\r",
                    "    }));\r",
                    "\r",
                    "    if (Ext.isEmpty(component.bType)){\r",
                    "        var categories = Ext.clone(component.champsConfig.simple);\r",
                    "        var categoriesADV = Ext.clone(component.champsConfig.avance);\r",
                    "    } else {\r",
                    "        var categories=Ext.clone(Ext.getStore(\"BlocsDataStore\").findRecord('bType', component.bType,0,false,false,true).get(\"configBasique\").champsConfig.simple);\r",
                    "        var categoriesADV=Ext.clone(Ext.getStore(\"BlocsDataStore\").findRecord('bType', component.bType,0,false,false,true).get(\"configBasique\").champsConfig.avance);\r",
                    "    }\r",
                    "\r",
                    "    Ext.Array.forEach(categoriesADV,function(someCat){someCat.isAdv=true;});\r",
                    "    categories=Ext.Array.merge(categories,categoriesADV);\r",
                    "    for (j=0; j<categories.length; j++){\r",
                    "        var nCateg = Ext.create('Ext.form.FieldSet', {title: categories[j].categorie, collapsible:true, layout: 'anchor'});\r",
                    "        nCateg.isAdv=categories[j].isAdv;\r",
                    "\r",
                    "        var champsS = Ext.clone(categories[j].champs);\r",
                    "        for (i=0; i<champsS.length; i++) {\r",
                    "            if (champsS[i].type =='Ext.ux.TreePicker') {\r",
                    "                var filteredStore=  Ext.create(\"Ext.data.TreeStore\",{autoLoad: false,\r",
                    "                        autoSync: false,\r",
                    "                        isOptimised:true,\r",
                    "                        usedCollection:\"Pages\",\r",
                    "                        model: 'Rubedo.model.pageDataModel',\r",
                    "                        proxy: {\r",
                    "                            type: 'ajax',\r",
                    "                            api: {\r",
                    "                                create: 'pages/create',\r",
                    "                                read: 'pages/tree',\r",
                    "                                update: 'pages/update',\r",
                    "                                destroy: 'pages/delete'\r",
                    "                            },\r",
                    "                            reader: {\r",
                    "                                type: 'json',\r",
                    "                                getResponseData: function(response) {\r",
                    "                                    var data, error;\r",
                    "\r",
                    "                                try {\r",
                    "                                    data = Ext.decode(response.responseText);\r",
                    "                                    if (Ext.isDefined(data.data)){data.children=data.data;}// error fix\r",
                    "                                    return this.readRecords(data);\r",
                    "                                } catch (ex) {\r",
                    "                                    error = new Ext.data.ResultSet({\r",
                    "                                        total  : 0,\r",
                    "                                        count  : 0,\r",
                    "                                        records: [],\r",
                    "                                        success: false,\r",
                    "                                        message: ex.message\r",
                    "                                    });\r",
                    "\r",
                    "                                    this.fireEvent('exception', this, response, error);\r",
                    "                                    console.log(ex);\r",
                    "\r",
                    "                                    Ext.Logger.warn('Unable to parse the JSON returned by the server');\r",
                    "\r",
                    "                                    return error;\r",
                    "                                }\r",
                    "                            },\r",
                    "                            messageProperty: 'message'\r",
                    "                        }\r",
                    "                    },\r",
                    "                    sorters: {\r",
                    "                        property: 'orderValue'\r",
                    "                    }\r",
                    "                }); \r",
                    "\r",
                    "                filteredStore.getProxy().extraParams.filter=\"[{\\\"property\\\":\\\"site\\\",\\\"value\\\":\\\"\"+Ext.getCmp(\"mainPageTree\").getSelectionModel().getLastSelected().get(\"site\")+\"\\\"}]\";\r",
                    "                filteredStore.load();\r",
                    "                champsS[i].config.store= filteredStore;\r",
                    "                champsS[i].config.displayField=\"text\";\r",
                    "                champsS[i].config.plugins=[Ext.create(\"Ext.ux.form.field.ClearButton\")];\r",
                    "\r",
                    "\r",
                    "\r",
                    "            }else if (champsS[i].isAutoStored){\r",
                    "                var miniStore=Ext.create('Ext.data.Store', {\r",
                    "                    fields:[{name:\"value\"},{name:\"label\"}],\r",
                    "                    data:champsS[i].autoStoreData,\r",
                    "                    autoload:true\r",
                    "                });\r",
                    "                champsS[i].config.store= miniStore;\r",
                    "                champsS[i].config.displayField=\"label\";\r",
                    "                champsS[i].config.valueField=\"value\";\r",
                    "            }\r",
                    "            var nChampS = Ext.create(champsS[i].type, champsS[i].config);\r",
                    "            if (champsS[i].type =='Ext.form.field.Trigger'){\r",
                    "                var Ouvrir = Ext.clone(champsS[i].ouvrir);\r",
                    "                var targeting=Ext.clone(nChampS.id);\r",
                    "                nChampS.onTriggerClick= function() {\r",
                    "                    var fenetre = Ext.widget(Ouvrir);\r",
                    "                    fenetre.show();\r",
                    "                    fenetre.mainFieldId=targeting;\r",
                    "\r",
                    "                } ;  \r",
                    "            }\r",
                    "            nChampS.labelSeparator= ' ';\r",
                    "            nChampS.anchor= '100%';   \r",
                    "            nChampS.labelWidth=100;\r",
                    "            nChampS.setValue(component.configBloc[nChampS.name]);\r",
                    "            if ((nChampS.isXType(\"combobox\"))&&(!nChampS.isXType(\"treepicker\"))){\r",
                    "                nChampS.getStore().fieldId=Ext.clone(nChampS.id);\r",
                    "                nChampS.getStore().fieldValue=Ext.clone(component.configBloc[nChampS.name]);\r",
                    "                nChampS.getStore().addListener(\"load\",function(storeThing){\r",
                    "                    if (!Ext.isEmpty(Ext.getCmp(storeThing.fieldId))){\r",
                    "                    Ext.getCmp(storeThing.fieldId).setValue(storeThing.fieldValue);\r",
                    "                    }\r",
                    "                },this,{single:true});\r",
                    "                }\r",
                    "                if (nChampS.isXType(\"treepicker\")){\r",
                    "                    nChampS.on('select', function(){component.configBloc[this.name]=this.getValue(); });\r",
                    "\r",
                    "                }\r",
                    "                if (nChampS.isXType(\"comboboxselect\")){\r",
                    "                    nChampS.on('afterrender', function(thing){thing.fireEvent(\"change\");});\r",
                    "\r",
                    "                }\r",
                    "                nChampS.on('change', function(){ component.configBloc[this.name]=this.getValue();});\r",
                    "\r",
                    "                nCateg.add(nChampS);\r",
                    "            }\r",
                    "            if(nCateg.isAdv){\r",
                    "                configSpec.getComponent(1).add(nCateg);\r",
                    "            }else{\r",
                    "                configSpec.getComponent(0).add(nCateg);\r",
                    "            }\r",
                    "\r",
                    "\r",
                    "        }\r",
                    "        propEdit.add(configSpec);\r",
                    "\r",
                    "\r",
                    "        if ((!ACL.interfaceRights['write.ui.pages'])||(Ext.getCmp(\"mainPageTree\").getSelectionModel().getLastSelected().get(\"readOnly\"))){\r",
                    "            Ext.Array.forEach(Ext.getCmp(\"pageElementPropsPanel\").query(\"field\"), function(truc){truc.setReadOnly(true);});\r",
                    "            Ext.Array.forEach(Ext.getCmp(\"pageElementPropsPanel\").query(\"button\"), function(truc){if (!truc.isXType(\"tab\")){truc.disable();}});\r",
                    "        }\r",
                    "        e.stopEvent();\r",
                    "\r",
                    "    });}"
                ],
                "name": "render",
                "scope": "me",
                "designer|targetType": "UnBloc",
                "designer|controlQuery": "#mainPageEdition unBloc"
            },
            "designerId": "14fe1e98-83ce-46a5-be63-48558f1afbcb"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "savePage",
                "implHandler": [
                    "var me=this;\r",
                    "if (Ext.getCmp(\"mainPageAttributeForm\").getForm().isValid()) {\r",
                    "    var editedPage=Ext.getCmp(\"mainPageTree\").getSelectionModel().getLastSelected();\r",
                    "    var newBlocks=this.saveBlocks(Ext.getCmp(\"mainPageEdition\"));\r",
                    "    var store=Ext.getCmp(\"mainPageTree\").getStore();\r",
                    "    store.suspendAutoSync();\r",
                    "    editedPage.beginEdit();\r",
                    "    editedPage.set(\"blocks\",newBlocks);\r",
                    "    editedPage.set(Ext.getCmp(\"mainPageAttributeForm\").getForm().getFieldValues());\r",
                    "    Ext.getCmp(\"pagesDLSToolbar\").persisti18n(editedPage);\r",
                    "    editedPage.endEdit();\r",
                    "    store.resumeAutoSync();\r",
                    "    store.sync();\r",
                    "    store.addListener(\"update\", function(a, record){\r",
                    "\r",
                    "        Ext.getCmp(\"mainPageAttributeForm\").getForm().loadRecord(record);\r",
                    "        var arButtons = [ ];\r",
                    "        me.breadcrumbBuilder(record,arButtons);\r",
                    "        Ext.getCmp(\"pageTreeBreadcrumb\").removeAll();\r",
                    "        Ext.getCmp(\"pageTreeBreadcrumb\").add(arButtons.reverse());\r",
                    "        var metaBox = Ext.getCmp(\"contributionPages\").getDockedComponent('barreMeta').getComponent('boiteBarreMeta');\r",
                    "        var values= record.getData();\r",
                    "        values.creation= Ext.Date.format(values.createTime, 'd-m-Y');\r",
                    "        values.derniereModification= Ext.Date.format(values.lastUpdateTime, 'd-m-Y');\r",
                    "        metaBox.update(values);\r",
                    "        metaBox.show();\r",
                    "\r",
                    "    },this,{single:true});\r",
                    "        Ext.getCmp(\"mainPageTree\").getSelectionModel().getLastSelected().collapseChildren(true);\r",
                    "        Ext.getCmp(\"mainPageTree\").getStore().load({\"node\":Ext.getCmp(\"mainPageTree\").getSelectionModel().getLastSelected()});\r",
                    "        Ext.getCmp(\"pagesInternalPreview\").removeAll();\r",
                    "        Ext.Ajax.request({\r",
                    "            url: 'xhr-get-page-url',\r",
                    "            params: {\r",
                    "                \"page-id\": editedPage.get(\"id\")\r",
                    "            },\r",
                    "            success: function(response){\r",
                    "                var targetedUrl = Ext.JSON.decode(response.responseText).url;\r",
                    "                Ext.getCmp(\"pagesInternalPreview\").add(Ext.widget(\"component\",{\r",
                    "                    autoEl: {\r",
                    "                        tag: 'iframe',\r",
                    "                        src: targetedUrl+\"?preview=1\"\r",
                    "                    }\r",
                    "                }));\r",
                    "            },\r",
                    "            failure:function(){\r",
                    "                Ext.Msg.alert(Rubedo.RubedoAutomatedElementsLoc.errorTitle, Rubedo.RubedoAutomatedElementsLoc.pageURLRecoveryError);\r",
                    "            }\r",
                    "        });\r",
                    "        var task = new Ext.util.DelayedTask(function(){\r",
                    "            Ext.getCmp(\"mainPageTree\").getSelectionModel().deselectAll();\r",
                    "            Ext.getCmp(\"mainPageTree\").getSelectionModel().select(editedPage);\r",
                    "        });\r",
                    "        task.delay(200);\r",
                    "\r",
                    "    } else {\r",
                    "        Ext.getCmp(\"mainPageAttributeForm\").up().up().setActiveTab(2);\r",
                    "        Ext.Msg.alert(Rubedo.RubedoAutomatedElementsLoc.errorTitle, Rubedo.RubedoAutomatedElementsLoc.pagePropertiesInvalidError);\r",
                    "    }"
                ],
                "name": "click",
                "scope": "me",
                "designer|targetType": "Ext.button.Button",
                "designer|controlQuery": "#pageSaveBtn"
            },
            "designerId": "b1fb801d-af5e-43a7-b7f8-56799de85ce4"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "onWindowBeforeDestroy",
                "implHandler": [
                    "if (component.isXType(\"window\")){\r",
                    "    Ext.getStore(\"MasksComboStore\").removeAll();\r",
                    "    Ext.getStore(\"PagesDataStore\").getProxy().extraParams.filter=\"[{\\\"property\\\":\\\"site\\\",\\\"value\\\":\\\"emptyDecoy\\\"}]\";\r",
                    "    Ext.getStore(\"PagesDataStore\").load();\r",
                    "    Ext.getStore(\"PageDisplayedContentsStore\").removeAll();\r",
                    "}"
                ],
                "name": "beforedestroy",
                "scope": "me",
                "designer|targetType": "Ext.window.Window",
                "designer|controlQuery": "#contributionPages"
            },
            "designerId": "6120f6e7-46b7-410a-971d-e8c79c4f2e57"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "onPagesSitesComboBeforeRender",
                "implHandler": [
                    "var me=this;\r",
                    "component.getStore().addListener(\"load\",function(store,records){\r",
                    "    if (!Ext.isEmpty(records)){\r",
                    "        component.select(records[0]);\r",
                    "        if (component.id==\"previewSitesCombo\"){\r",
                    "            me.pagePreviewSelect(component, [records[0]]);\r",
                    "        } else if (component.id==\"pagesSitesCombo\"){\r",
                    "            me.pageSiteSelect(component, [records[0]]);\r",
                    "        }\r",
                    "        if (records.length==1){\r",
                    "            component.up().hide();\r",
                    "        }\r",
                    "    }\r",
                    "},this,{single:true});"
                ],
                "name": "beforerender",
                "scope": "me",
                "designer|targetType": "Ext.form.field.ComboBox",
                "designer|controlQuery": "#pagesSitesCombo, #previewSitesCombo"
            },
            "designerId": "fed768ea-12ff-49c5-8386-55e42679392e"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "pagePreviewSelect",
                "implHandler": [
                    "Ext.getStore(\"PagesPreviewStore\").getProxy().extraParams.filter=\"[{\\\"property\\\":\\\"site\\\",\\\"value\\\":\\\"\"+records[0].get(\"id\")+\"\\\"}]\";\r",
                    "Ext.getStore(\"PagesPreviewStore\").load();\r",
                    "Ext.getCmp(\"previewLanguageCombo\").getStore().removeAll();\r",
                    "var record=records[0];\r",
                    "Ext.Array.forEach(record.get(\"languages\"), function(key){\r",
                    "    try{\r",
                    "        var potentialLabel=Ext.getStore(\"AllLanguagesStore3\").query(\"locale\",key,false,false,true).items[0].get(\"label\");\r",
                    "        var betterLabel=Ext.getStore(\"AllLanguagesStore3\").query(\"locale\",key,false,false,true).items[0].get(\"ownLabel\");\r",
                    "        if (!Ext.isEmpty(betterLabel)){\r",
                    "            potentialLabel=betterLabel;\r",
                    "        }\r",
                    "        Ext.getCmp(\"previewLanguageCombo\").getStore().add({\"locale\":key,\"label\":potentialLabel, \"flagCode\":Ext.getStore(\"AllLanguagesStore3\").query(\"locale\",key,false,false,true).items[0].get(\"flagCode\")});\r",
                    "    }catch(err){}\r",
                    "    });\r",
                    "    Ext.getCmp(\"previewLanguageCombo\").setValue(record.get(\"defaultLanguage\"));\r",
                    "    Ext.getCmp(\"contribPreviewMain\").removeAll();"
                ],
                "name": "select",
                "scope": "me",
                "designer|targetType": "Ext.form.field.ComboBox",
                "designer|controlQuery": "#previewSitesCombo"
            },
            "designerId": "7d7ddd9d-d877-4060-9865-9fec1199851e"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "onPreviewPageTreeSelect",
                "implHandler": [
                    "Ext.getCmp(\"contribPreviewMain\").removeAll();\r",
                    "var dateValue=\"\";\r",
                    "if (!Ext.isEmpty(Ext.getCmp(\"advancedPreviewDateField\").getValue())){\r",
                    "    dateValue=\"&preview_date=\"+Ext.Date.format(Ext.getCmp(\"advancedPreviewDateField\").getValue(), \"U\");\r",
                    "\r",
                    "}\r",
                    "if (!Ext.isEmpty(record)){\r",
                    "    Ext.getCmp(\"contribPreviewMain\").removeAll();\r",
                    "    if(!record.isRoot()){\r",
                    "        Ext.Ajax.request({\r",
                    "            url: 'xhr-get-page-url',\r",
                    "            params: {\r",
                    "                \"page-id\": record.get(\"id\"),\r",
                    "                \"locale\":Ext.getCmp(\"previewLanguageCombo\").getValue()\r",
                    "            },\r",
                    "            success: function(response){\r",
                    "                var targetedUrl = Ext.JSON.decode(response.responseText).url;\r",
                    "                var showArg =encodeURIComponent(targetedUrl+\"?preview=1\"+\"&preview_draft=\"+Ext.getCmp(\"advancedPreviewDraftField\").getValue()+dateValue);\r",
                    "                Ext.getCmp(\"contribPreviewMain\").add(Ext.widget(\"component\",{\r",
                    "                    autoEl: {\r",
                    "                        tag: 'iframe',\r",
                    "                        src: \"resources/responsiveShow/?device=\"+Ext.getCmp(\"previewDeviceCombo\").getActiveItem().deviceValue+\"&url=\"+showArg\r",
                    "                    }\r",
                    "                }));\r",
                    "            },\r",
                    "            failure:function(){\r",
                    "                Ext.Msg.alert(Rubedo.RubedoAutomatedElementsLoc.errorTitle, Rubedo.RubedoAutomatedElementsLoc.pageURLRecoveryError);\r",
                    "            }\r",
                    "        });\r",
                    "    }}"
                ],
                "name": "select",
                "scope": "me",
                "designer|targetType": "Ext.tree.Panel",
                "designer|controlQuery": "#previewPageTree"
            },
            "designerId": "56a373a5-6913-4cda-b321-5fb604f616bd"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "onPagePreviewRefreshBtnClick",
                "implHandler": [
                    "var record = Ext.getCmp(\"mainPageTree\").getSelectionModel().getLastSelected();\r",
                    "if ((!Ext.isEmpty(record))&&(!record.isRoot())){\r",
                    "    Ext.getCmp(\"pagesInternalPreview\").removeAll();\r",
                    "    Ext.Ajax.request({\r",
                    "        url: 'xhr-get-page-url',\r",
                    "        params: {\r",
                    "            \"page-id\": record.get(\"id\"),\r",
                    "            \"locale\": Ext.getCmp(\"pagesDLSToolbar\").getComponent(0).getValue()\r",
                    "        },\r",
                    "        success: function(response){\r",
                    "            var targetedUrl = Ext.JSON.decode(response.responseText).url;\r",
                    "            Ext.getCmp(\"pagesInternalPreview\").add(Ext.widget(\"component\",{\r",
                    "                autoEl: {\r",
                    "                    tag: 'iframe',\r",
                    "                    src: targetedUrl+\"?preview=1\"\r",
                    "                }\r",
                    "            }));\r",
                    "        },\r",
                    "        failure:function(){\r",
                    "            Ext.Msg.alert(Rubedo.RubedoAutomatedElementsLoc.errorTitle, Rubedo.RubedoAutomatedElementsLoc.pageURLRecoveryError);\r",
                    "        }\r",
                    "    });\r",
                    "}"
                ],
                "name": "click",
                "scope": "me",
                "designer|targetType": "Ext.button.Button",
                "designer|controlQuery": "#pagePreviewRefreshBtn"
            },
            "designerId": "c918931f-c27c-4264-9d18-6cc8b64eb2c2"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "renderBlocks",
                "designer|params": [
                    "mBlocks",
                    "editable"
                ],
                "implHandler": [
                    "Ext.Array.forEach(mBlocks, function(block){\r",
                    "    block.title=Ext.util.Format.stripTags(block.title);\r",
                    "    if (block.parentCol.indexOf(\"page-\")==-1) {\r",
                    "        block.parentCol=\"page-\"+block.parentCol;\r",
                    "    }\r",
                    "    if (block.id.indexOf(\"page-\")==-1) {\r",
                    "        block.id=\"page-\"+block.id;\r",
                    "    }\r",
                    "    var targetCol=Ext.getCmp(block.parentCol);\r",
                    "    if ((!Ext.isEmpty(targetCol))&&(targetCol.mType=='col')){\r",
                    "        block.canEdit=editable;\r",
                    "        if (Ext.isEmpty(block.configBloc)){\r",
                    "            block.configBloc={ };\r",
                    "        }\r",
                    "        block.flex=1;\r",
                    "        if (editable) {\r",
                    "            var insertIndex=0;\r",
                    "            Ext.Array.forEach(targetCol.items.items, function(brother){\r",
                    "                if (brother.orderValue<block.orderValue){\r",
                    "                    insertIndex=insertIndex+1;\r",
                    "                }\r",
                    "            });\r",
                    "            targetCol.insert(insertIndex, Ext.widget(\"unBloc\",block));\r",
                    "        } else{\r",
                    "            targetCol.add(Ext.widget(\"unBloc\",block));\r",
                    "        }\r",
                    "    }\r",
                    "});"
                ]
            },
            "designerId": "697d3f08-71dd-4250-a19d-1915efb54c1c"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "saveBlocks",
                "designer|params": [
                    "startComp"
                ],
                "implHandler": [
                    "var newBlocks = [ ];\r",
                    "Ext.Array.forEach(startComp.query(\"unBloc\"), function(nBloc){\r",
                    "    if (nBloc.canEdit){\r",
                    "        var myLocaleFilters=nBloc.localeFilters;\r",
                    "        if (Ext.isEmpty(myLocaleFilters)){\r",
                    "            myLocaleFilters=['all'];\r",
                    "        }\r",
                    "        newBlocks.push({\r",
                    "            bType:nBloc.bType,\r",
                    "            id:nBloc.getId().replace(\"page-\",\"\"),\r",
                    "            i18n:nBloc.i18n,\r",
                    "            parentCol:nBloc.up().getId().replace(\"page-\",\"\"),\r",
                    "            mType:\"block\",\r",
                    "            champsConfig:nBloc.champsConfig,\r",
                    "            configBloc:nBloc.configBloc,\r",
                    "            orderValue:nBloc.orderValue,\r",
                    "            title:nBloc.title,\r",
                    "            localeFilters:myLocaleFilters,\r",
                    "            elementStyle:nBloc.elementStyle,\r",
                    "            elementTag:nBloc.elementTag,\r",
                    "            renderDiv:nBloc.renderDiv,\r",
                    "            responsive:nBloc.responsive,\r",
                    "            classHTML:nBloc.classHTML,\r",
                    "            displayTitle:nBloc.displayTitle,\r",
                    "            idHTML:nBloc.idHTML,\r",
                    "            urlPrefix:nBloc.urlPrefix,\r",
                    "            flex:nBloc.flex,\r",
                    "            canEdit:nBloc.canEdit,\r",
                    "            checksum:nBloc.checksum\r",
                    "        });\r",
                    "    }\r",
                    "});\r",
                    "return(newBlocks);"
                ]
            },
            "designerId": "03579757-73d3-4682-95af-acdc91dcfeee"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "onAdvancedPreviewPageRefreshClick",
                "implHandler": [
                    "var record=Ext.getCmp(\"previewPageTree\").getSelectionModel().getLastSelected();\r",
                    "var dateValue=\"\";\r",
                    "if (!Ext.isEmpty(Ext.getCmp(\"advancedPreviewDateField\").getValue())){\r",
                    "    dateValue=\"&preview_date=\"+Ext.Date.format(Ext.getCmp(\"advancedPreviewDateField\").getValue(), \"U\");\r",
                    "\r",
                    "}\r",
                    "if (!Ext.isEmpty(record)){\r",
                    "    Ext.getCmp(\"contribPreviewMain\").removeAll();\r",
                    "    if(!record.isRoot()){\r",
                    "        Ext.Ajax.request({\r",
                    "            url: 'xhr-get-page-url',\r",
                    "            params: {\r",
                    "                \"page-id\": record.get(\"id\"),\r",
                    "                \"locale\":Ext.getCmp(\"previewLanguageCombo\").getValue()\r",
                    "            },\r",
                    "            success: function(response){\r",
                    "                var targetedUrl = Ext.JSON.decode(response.responseText).url;\r",
                    "                var showArg =encodeURIComponent(targetedUrl+\"?preview=1\"+\"&preview_draft=\"+Ext.getCmp(\"advancedPreviewDraftField\").getValue()+dateValue);\r",
                    "                Ext.getCmp(\"contribPreviewMain\").add(Ext.widget(\"component\",{\r",
                    "                    autoEl: {\r",
                    "                        tag: 'iframe',\r",
                    "                        src: \"resources/responsiveShow/?device=\"+Ext.getCmp(\"previewDeviceCombo\").getActiveItem().deviceValue+\"&url=\"+showArg\r",
                    "                    }\r",
                    "                }));\r",
                    "            },\r",
                    "            failure:function(){\r",
                    "                Ext.Msg.alert(Rubedo.RubedoAutomatedElementsLoc.errorTitle, Rubedo.RubedoAutomatedElementsLoc.pageURLRecoveryError);\r",
                    "            }\r",
                    "        });\r",
                    "    }}"
                ],
                "name": "click",
                "scope": "me",
                "designer|targetType": "Ext.button.Button",
                "designer|controlQuery": "#advancedPreviewPageRefresh"
            },
            "designerId": "f4a5fbda-c3f3-452f-ae1a-7c849557ecdb"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "onPanelActivate",
                "implHandler": [
                    "var record = Ext.getCmp(\"mainPageTree\").getSelectionModel().getLastSelected();\r",
                    "if ((!Ext.isEmpty(record))&&(!record.isRoot())){\r",
                    "    component.getComponent(0).getStore().getProxy().extraParams.id=record.get(\"id\");\r",
                    "    component.getComponent(0).getStore().load();\r",
                    "}"
                ],
                "name": "activate",
                "scope": "me",
                "designer|targetType": "Ext.panel.Panel",
                "designer|controlQuery": "#pageContentDisplayer"
            },
            "designerId": "5091cbda-a9df-4eac-981f-ca61c7c60bc4"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "onNewPageMaskSelectorAfterRender",
                "implHandler": [
                    "var target=Ext.getCmp(\"mainPageTree\").getSelectionModel().getLastSelected();\r",
                    "if (!target.isRoot()){\r",
                    "    component.setValue(target.get(\"maskId\"));\r",
                    "}"
                ],
                "name": "afterrender",
                "scope": "me",
                "designer|targetType": "Ext.form.field.ComboBox",
                "designer|controlQuery": "#newPageMaskSelector"
            },
            "designerId": "bf10d1bf-4fdb-4d8e-a9bb-94b9048e7483"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "breadcrumbBuilder",
                "designer|params": [
                    "node",
                    "array"
                ],
                "implHandler": [
                    "var me=this;\r",
                    "if (node.isRoot()) {\r",
                    "\r",
                    "} else {\r",
                    "    var button = Ext.widget(\"button\", {text:node.get(\"text\")+\"<b> ></b>\", iconCls:\"masque-icon\"});\r",
                    "    button.on(\"click\",function(){ Ext.getCmp(\"contributionPages\").getComponent(0).getSelectionModel().select(node);});\r",
                    "    array.push(button);\r",
                    "    me.breadcrumbBuilder(node.parentNode,array);\r",
                    "}"
                ]
            },
            "designerId": "485d72de-4ede-48af-b4b7-0646f7a95e2a"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "onPageMaskDisplayBtnClick",
                "implHandler": [
                    "var recordM = Ext.getCmp(\"mainPageTree\").getSelectionModel().getLastSelected().get(\"maskId\");\r",
                    "var fenetre = Ext.getCmp(\"adminFMDP\");\r",
                    "if (Ext.isDefined(fenetre)){fenetre.show();  fenetre.toFront(); }\r",
                    "else {\r",
                    "    fenetre = Ext.widget(\"adminFMDP\");\r",
                    "    if (MyPrefData.simpleMode){\r",
                    "        fenetre.maximized=true;\r",
                    "        fenetre.draggable=false;\r",
                    "    }\r",
                    "    Ext.getCmp('desktopCont').add(fenetre);\r",
                    "    if (Ext.isDefined(window.innerHeight)) {\r",
                    "        if (fenetre.height>(window.innerHeight-40)) {fenetre.setHeight((window.innerHeight-40));}\r",
                    "        if (fenetre.width>(window.innerWidth)) {fenetre.setWidth((window.innerWidth));}\r",
                    "    }\r",
                    "    fenetre.show();\r",
                    "}\r",
                    "var target=Ext.getCmp(\"adminFMDP\").getComponent(0);\r",
                    "if (!Ext.isEmpty(target)) {\r",
                    "\r",
                    "    if (target.getStore().isLoading()) {\r",
                    "        target.getStore().addListener(\"load\", function(){target.getSelectionModel().select(target.getStore().findRecord(\"id\",recordM));},this,{single:true});\r",
                    "    } else {\r",
                    "        target.getSelectionModel().select(target.getStore().findRecord(\"id\",recordM));\r",
                    "    }\r",
                    "}"
                ],
                "name": "click",
                "scope": "me",
                "designer|targetType": "Ext.button.Button",
                "designer|controlQuery": "#pageMaskDisplayBtn"
            },
            "designerId": "9a070aa8-2350-4882-a6b5-c828fbfe6494"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "removeDiacritics",
                "designer|params": [
                    "str"
                ],
                "implHandler": [
                    "\r",
                    "  var defaultDiacriticsRemovalMap = [\r",
                    "    {'base':'A', 'letters':/[\\u0041\\u24B6\\uFF21\\u00C0\\u00C1\\u00C2\\u1EA6\\u1EA4\\u1EAA\\u1EA8\\u00C3\\u0100\\u0102\\u1EB0\\u1EAE\\u1EB4\\u1EB2\\u0226\\u01E0\\u00C4\\u01DE\\u1EA2\\u00C5\\u01FA\\u01CD\\u0200\\u0202\\u1EA0\\u1EAC\\u1EB6\\u1E00\\u0104\\u023A\\u2C6F]/g},\r",
                    "    {'base':'AA','letters':/[\\uA732]/g},\r",
                    "    {'base':'AE','letters':/[\\u00C6\\u01FC\\u01E2]/g},\r",
                    "    {'base':'AO','letters':/[\\uA734]/g},\r",
                    "    {'base':'AU','letters':/[\\uA736]/g},\r",
                    "    {'base':'AV','letters':/[\\uA738\\uA73A]/g},\r",
                    "    {'base':'AY','letters':/[\\uA73C]/g},\r",
                    "    {'base':'B', 'letters':/[\\u0042\\u24B7\\uFF22\\u1E02\\u1E04\\u1E06\\u0243\\u0182\\u0181]/g},\r",
                    "    {'base':'C', 'letters':/[\\u0043\\u24B8\\uFF23\\u0106\\u0108\\u010A\\u010C\\u00C7\\u1E08\\u0187\\u023B\\uA73E]/g},\r",
                    "    {'base':'D', 'letters':/[\\u0044\\u24B9\\uFF24\\u1E0A\\u010E\\u1E0C\\u1E10\\u1E12\\u1E0E\\u0110\\u018B\\u018A\\u0189\\uA779]/g},\r",
                    "    {'base':'DZ','letters':/[\\u01F1\\u01C4]/g},\r",
                    "    {'base':'Dz','letters':/[\\u01F2\\u01C5]/g},\r",
                    "    {'base':'E', 'letters':/[\\u0045\\u24BA\\uFF25\\u00C8\\u00C9\\u00CA\\u1EC0\\u1EBE\\u1EC4\\u1EC2\\u1EBC\\u0112\\u1E14\\u1E16\\u0114\\u0116\\u00CB\\u1EBA\\u011A\\u0204\\u0206\\u1EB8\\u1EC6\\u0228\\u1E1C\\u0118\\u1E18\\u1E1A\\u0190\\u018E]/g},\r",
                    "    {'base':'F', 'letters':/[\\u0046\\u24BB\\uFF26\\u1E1E\\u0191\\uA77B]/g},\r",
                    "    {'base':'G', 'letters':/[\\u0047\\u24BC\\uFF27\\u01F4\\u011C\\u1E20\\u011E\\u0120\\u01E6\\u0122\\u01E4\\u0193\\uA7A0\\uA77D\\uA77E]/g},\r",
                    "    {'base':'H', 'letters':/[\\u0048\\u24BD\\uFF28\\u0124\\u1E22\\u1E26\\u021E\\u1E24\\u1E28\\u1E2A\\u0126\\u2C67\\u2C75\\uA78D]/g},\r",
                    "    {'base':'I', 'letters':/[\\u0049\\u24BE\\uFF29\\u00CC\\u00CD\\u00CE\\u0128\\u012A\\u012C\\u0130\\u00CF\\u1E2E\\u1EC8\\u01CF\\u0208\\u020A\\u1ECA\\u012E\\u1E2C\\u0197]/g},\r",
                    "    {'base':'J', 'letters':/[\\u004A\\u24BF\\uFF2A\\u0134\\u0248]/g},\r",
                    "    {'base':'K', 'letters':/[\\u004B\\u24C0\\uFF2B\\u1E30\\u01E8\\u1E32\\u0136\\u1E34\\u0198\\u2C69\\uA740\\uA742\\uA744\\uA7A2]/g},\r",
                    "    {'base':'L', 'letters':/[\\u004C\\u24C1\\uFF2C\\u013F\\u0139\\u013D\\u1E36\\u1E38\\u013B\\u1E3C\\u1E3A\\u0141\\u023D\\u2C62\\u2C60\\uA748\\uA746\\uA780]/g},\r",
                    "    {'base':'LJ','letters':/[\\u01C7]/g},\r",
                    "    {'base':'Lj','letters':/[\\u01C8]/g},\r",
                    "    {'base':'M', 'letters':/[\\u004D\\u24C2\\uFF2D\\u1E3E\\u1E40\\u1E42\\u2C6E\\u019C]/g},\r",
                    "    {'base':'N', 'letters':/[\\u004E\\u24C3\\uFF2E\\u01F8\\u0143\\u00D1\\u1E44\\u0147\\u1E46\\u0145\\u1E4A\\u1E48\\u0220\\u019D\\uA790\\uA7A4]/g},\r",
                    "    {'base':'NJ','letters':/[\\u01CA]/g},\r",
                    "    {'base':'Nj','letters':/[\\u01CB]/g},\r",
                    "    {'base':'O', 'letters':/[\\u004F\\u24C4\\uFF2F\\u00D2\\u00D3\\u00D4\\u1ED2\\u1ED0\\u1ED6\\u1ED4\\u00D5\\u1E4C\\u022C\\u1E4E\\u014C\\u1E50\\u1E52\\u014E\\u022E\\u0230\\u00D6\\u022A\\u1ECE\\u0150\\u01D1\\u020C\\u020E\\u01A0\\u1EDC\\u1EDA\\u1EE0\\u1EDE\\u1EE2\\u1ECC\\u1ED8\\u01EA\\u01EC\\u00D8\\u01FE\\u0186\\u019F\\uA74A\\uA74C]/g},\r",
                    "    {'base':'OI','letters':/[\\u01A2]/g},\r",
                    "    {'base':'OO','letters':/[\\uA74E]/g},\r",
                    "    {'base':'OU','letters':/[\\u0222]/g},\r",
                    "    {'base':'P', 'letters':/[\\u0050\\u24C5\\uFF30\\u1E54\\u1E56\\u01A4\\u2C63\\uA750\\uA752\\uA754]/g},\r",
                    "    {'base':'Q', 'letters':/[\\u0051\\u24C6\\uFF31\\uA756\\uA758\\u024A]/g},\r",
                    "    {'base':'R', 'letters':/[\\u0052\\u24C7\\uFF32\\u0154\\u1E58\\u0158\\u0210\\u0212\\u1E5A\\u1E5C\\u0156\\u1E5E\\u024C\\u2C64\\uA75A\\uA7A6\\uA782]/g},\r",
                    "    {'base':'S', 'letters':/[\\u0053\\u24C8\\uFF33\\u1E9E\\u015A\\u1E64\\u015C\\u1E60\\u0160\\u1E66\\u1E62\\u1E68\\u0218\\u015E\\u2C7E\\uA7A8\\uA784]/g},\r",
                    "    {'base':'T', 'letters':/[\\u0054\\u24C9\\uFF34\\u1E6A\\u0164\\u1E6C\\u021A\\u0162\\u1E70\\u1E6E\\u0166\\u01AC\\u01AE\\u023E\\uA786]/g},\r",
                    "    {'base':'TZ','letters':/[\\uA728]/g},\r",
                    "    {'base':'U', 'letters':/[\\u0055\\u24CA\\uFF35\\u00D9\\u00DA\\u00DB\\u0168\\u1E78\\u016A\\u1E7A\\u016C\\u00DC\\u01DB\\u01D7\\u01D5\\u01D9\\u1EE6\\u016E\\u0170\\u01D3\\u0214\\u0216\\u01AF\\u1EEA\\u1EE8\\u1EEE\\u1EEC\\u1EF0\\u1EE4\\u1E72\\u0172\\u1E76\\u1E74\\u0244]/g},\r",
                    "    {'base':'V', 'letters':/[\\u0056\\u24CB\\uFF36\\u1E7C\\u1E7E\\u01B2\\uA75E\\u0245]/g},\r",
                    "    {'base':'VY','letters':/[\\uA760]/g},\r",
                    "    {'base':'W', 'letters':/[\\u0057\\u24CC\\uFF37\\u1E80\\u1E82\\u0174\\u1E86\\u1E84\\u1E88\\u2C72]/g},\r",
                    "    {'base':'X', 'letters':/[\\u0058\\u24CD\\uFF38\\u1E8A\\u1E8C]/g},\r",
                    "    {'base':'Y', 'letters':/[\\u0059\\u24CE\\uFF39\\u1EF2\\u00DD\\u0176\\u1EF8\\u0232\\u1E8E\\u0178\\u1EF6\\u1EF4\\u01B3\\u024E\\u1EFE]/g},\r",
                    "    {'base':'Z', 'letters':/[\\u005A\\u24CF\\uFF3A\\u0179\\u1E90\\u017B\\u017D\\u1E92\\u1E94\\u01B5\\u0224\\u2C7F\\u2C6B\\uA762]/g},\r",
                    "    {'base':'a', 'letters':/[\\u0061\\u24D0\\uFF41\\u1E9A\\u00E0\\u00E1\\u00E2\\u1EA7\\u1EA5\\u1EAB\\u1EA9\\u00E3\\u0101\\u0103\\u1EB1\\u1EAF\\u1EB5\\u1EB3\\u0227\\u01E1\\u00E4\\u01DF\\u1EA3\\u00E5\\u01FB\\u01CE\\u0201\\u0203\\u1EA1\\u1EAD\\u1EB7\\u1E01\\u0105\\u2C65\\u0250]/g},\r",
                    "    {'base':'aa','letters':/[\\uA733]/g},\r",
                    "    {'base':'ae','letters':/[\\u00E6\\u01FD\\u01E3]/g},\r",
                    "    {'base':'ao','letters':/[\\uA735]/g},\r",
                    "    {'base':'au','letters':/[\\uA737]/g},\r",
                    "    {'base':'av','letters':/[\\uA739\\uA73B]/g},\r",
                    "    {'base':'ay','letters':/[\\uA73D]/g},\r",
                    "    {'base':'b', 'letters':/[\\u0062\\u24D1\\uFF42\\u1E03\\u1E05\\u1E07\\u0180\\u0183\\u0253]/g},\r",
                    "    {'base':'c', 'letters':/[\\u0063\\u24D2\\uFF43\\u0107\\u0109\\u010B\\u010D\\u00E7\\u1E09\\u0188\\u023C\\uA73F\\u2184]/g},\r",
                    "    {'base':'d', 'letters':/[\\u0064\\u24D3\\uFF44\\u1E0B\\u010F\\u1E0D\\u1E11\\u1E13\\u1E0F\\u0111\\u018C\\u0256\\u0257\\uA77A]/g},\r",
                    "    {'base':'dz','letters':/[\\u01F3\\u01C6]/g},\r",
                    "    {'base':'e', 'letters':/[\\u0065\\u24D4\\uFF45\\u00E8\\u00E9\\u00EA\\u1EC1\\u1EBF\\u1EC5\\u1EC3\\u1EBD\\u0113\\u1E15\\u1E17\\u0115\\u0117\\u00EB\\u1EBB\\u011B\\u0205\\u0207\\u1EB9\\u1EC7\\u0229\\u1E1D\\u0119\\u1E19\\u1E1B\\u0247\\u025B\\u01DD]/g},\r",
                    "    {'base':'f', 'letters':/[\\u0066\\u24D5\\uFF46\\u1E1F\\u0192\\uA77C]/g},\r",
                    "    {'base':'g', 'letters':/[\\u0067\\u24D6\\uFF47\\u01F5\\u011D\\u1E21\\u011F\\u0121\\u01E7\\u0123\\u01E5\\u0260\\uA7A1\\u1D79\\uA77F]/g},\r",
                    "    {'base':'h', 'letters':/[\\u0068\\u24D7\\uFF48\\u0125\\u1E23\\u1E27\\u021F\\u1E25\\u1E29\\u1E2B\\u1E96\\u0127\\u2C68\\u2C76\\u0265]/g},\r",
                    "    {'base':'hv','letters':/[\\u0195]/g},\r",
                    "    {'base':'i', 'letters':/[\\u0069\\u24D8\\uFF49\\u00EC\\u00ED\\u00EE\\u0129\\u012B\\u012D\\u00EF\\u1E2F\\u1EC9\\u01D0\\u0209\\u020B\\u1ECB\\u012F\\u1E2D\\u0268\\u0131]/g},\r",
                    "    {'base':'j', 'letters':/[\\u006A\\u24D9\\uFF4A\\u0135\\u01F0\\u0249]/g},\r",
                    "    {'base':'k', 'letters':/[\\u006B\\u24DA\\uFF4B\\u1E31\\u01E9\\u1E33\\u0137\\u1E35\\u0199\\u2C6A\\uA741\\uA743\\uA745\\uA7A3]/g},\r",
                    "    {'base':'l', 'letters':/[\\u006C\\u24DB\\uFF4C\\u0140\\u013A\\u013E\\u1E37\\u1E39\\u013C\\u1E3D\\u1E3B\\u017F\\u0142\\u019A\\u026B\\u2C61\\uA749\\uA781\\uA747]/g},\r",
                    "    {'base':'lj','letters':/[\\u01C9]/g},\r",
                    "    {'base':'m', 'letters':/[\\u006D\\u24DC\\uFF4D\\u1E3F\\u1E41\\u1E43\\u0271\\u026F]/g},\r",
                    "    {'base':'n', 'letters':/[\\u006E\\u24DD\\uFF4E\\u01F9\\u0144\\u00F1\\u1E45\\u0148\\u1E47\\u0146\\u1E4B\\u1E49\\u019E\\u0272\\u0149\\uA791\\uA7A5]/g},\r",
                    "    {'base':'nj','letters':/[\\u01CC]/g},\r",
                    "    {'base':'o', 'letters':/[\\u006F\\u24DE\\uFF4F\\u00F2\\u00F3\\u00F4\\u1ED3\\u1ED1\\u1ED7\\u1ED5\\u00F5\\u1E4D\\u022D\\u1E4F\\u014D\\u1E51\\u1E53\\u014F\\u022F\\u0231\\u00F6\\u022B\\u1ECF\\u0151\\u01D2\\u020D\\u020F\\u01A1\\u1EDD\\u1EDB\\u1EE1\\u1EDF\\u1EE3\\u1ECD\\u1ED9\\u01EB\\u01ED\\u00F8\\u01FF\\u0254\\uA74B\\uA74D\\u0275]/g},\r",
                    "    {'base':'oi','letters':/[\\u01A3]/g},\r",
                    "    {'base':'ou','letters':/[\\u0223]/g},\r",
                    "    {'base':'oo','letters':/[\\uA74F]/g},\r",
                    "    {'base':'p','letters':/[\\u0070\\u24DF\\uFF50\\u1E55\\u1E57\\u01A5\\u1D7D\\uA751\\uA753\\uA755]/g},\r",
                    "    {'base':'q','letters':/[\\u0071\\u24E0\\uFF51\\u024B\\uA757\\uA759]/g},\r",
                    "    {'base':'r','letters':/[\\u0072\\u24E1\\uFF52\\u0155\\u1E59\\u0159\\u0211\\u0213\\u1E5B\\u1E5D\\u0157\\u1E5F\\u024D\\u027D\\uA75B\\uA7A7\\uA783]/g},\r",
                    "    {'base':'s','letters':/[\\u0073\\u24E2\\uFF53\\u00DF\\u015B\\u1E65\\u015D\\u1E61\\u0161\\u1E67\\u1E63\\u1E69\\u0219\\u015F\\u023F\\uA7A9\\uA785\\u1E9B]/g},\r",
                    "    {'base':'t','letters':/[\\u0074\\u24E3\\uFF54\\u1E6B\\u1E97\\u0165\\u1E6D\\u021B\\u0163\\u1E71\\u1E6F\\u0167\\u01AD\\u0288\\u2C66\\uA787]/g},\r",
                    "    {'base':'tz','letters':/[\\uA729]/g},\r",
                    "    {'base':'u','letters':/[\\u0075\\u24E4\\uFF55\\u00F9\\u00FA\\u00FB\\u0169\\u1E79\\u016B\\u1E7B\\u016D\\u00FC\\u01DC\\u01D8\\u01D6\\u01DA\\u1EE7\\u016F\\u0171\\u01D4\\u0215\\u0217\\u01B0\\u1EEB\\u1EE9\\u1EEF\\u1EED\\u1EF1\\u1EE5\\u1E73\\u0173\\u1E77\\u1E75\\u0289]/g},\r",
                    "    {'base':'v','letters':/[\\u0076\\u24E5\\uFF56\\u1E7D\\u1E7F\\u028B\\uA75F\\u028C]/g},\r",
                    "    {'base':'vy','letters':/[\\uA761]/g},\r",
                    "    {'base':'w','letters':/[\\u0077\\u24E6\\uFF57\\u1E81\\u1E83\\u0175\\u1E87\\u1E85\\u1E98\\u1E89\\u2C73]/g},\r",
                    "    {'base':'x','letters':/[\\u0078\\u24E7\\uFF58\\u1E8B\\u1E8D]/g},\r",
                    "    {'base':'y','letters':/[\\u0079\\u24E8\\uFF59\\u1EF3\\u00FD\\u0177\\u1EF9\\u0233\\u1E8F\\u00FF\\u1EF7\\u1E99\\u1EF5\\u01B4\\u024F\\u1EFF]/g},\r",
                    "    {'base':'z','letters':/[\\u007A\\u24E9\\uFF5A\\u017A\\u1E91\\u017C\\u017E\\u1E93\\u1E95\\u01B6\\u0225\\u0240\\u2C6C\\uA763]/g}\r",
                    "  ];\r",
                    "\r",
                    "  for(var i=0; i<defaultDiacriticsRemovalMap.length; i++) {\r",
                    "    str = str.replace(defaultDiacriticsRemovalMap[i].letters, defaultDiacriticsRemovalMap[i].base);\r",
                    "  }\r",
                    "\r",
                    "  return str;\r",
                    "\r",
                    ""
                ]
            },
            "designerId": "bc7bb37a-2f7e-4bf5-8b6b-022067227520"
        }
    ]
}