{
    "type": "controller",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "designer|userClassName": "SearchController",
        "designer|userAlias": "SearchController"
    },
    "id": "ExtBox1-ext-gen15520",
    "designerId": "606ff5d4-d66c-4e04-81ba-5331a2b062fc",
    "cn": [
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|userClassName": "mainSearchLaunch",
                "fn": "mainSearchLaunch",
                "implHandler": [
                    "if (Ext.getCmp('ESSearchField').isValid()){\r",
                    "    var DisplayResults=Ext.getCmp('searchResultsWindow');\r",
                    "    if (Ext.isEmpty(DisplayResults)){\r",
                    "        DisplayResults=Ext.widget('searchResultsWindow');\r",
                    "        Ext.getCmp(\"ViewportPrimaire\").add(DisplayResults);\r",
                    "        DisplayResults.show();\r",
                    "    } else {\r",
                    "        DisplayResults.show();\r",
                    "        DisplayResults.toFront();\r",
                    "    }\r",
                    "    DisplayResults.getComponent(0).getStore().removeAll();\r",
                    "    DisplayResults.setLoading(true);\r",
                    "    Ext.Ajax.request({\r",
                    "        url: 'elastic-search',\r",
                    "        params: {\r",
                    "            query: Ext.getCmp('ESSearchField').getValue()\r",
                    "        },\r",
                    "        success: function(response){\r",
                    "            var data=[];\r",
                    "            var bigRez=Ext.JSON.decode(response.responseText);\r",
                    "            Ext.Array.forEach(bigRez, function(rez){\r",
                    "                var thing=rez[Ext.Object.getKeys(rez)[0]]._source;\r",
                    "                data.push({\r",
                    "                    text:thing.text,\r",
                    "                    type:thing.type,\r",
                    "                    id:rez[Ext.Object.getKeys(rez)[0]]._id\r",
                    "                });\r",
                    "            });\r",
                    "            DisplayResults.getComponent(0).getStore().loadData(data);\r",
                    "            DisplayResults.setLoading(false);\r",
                    "            \r",
                    "        }\r",
                    "    });\r",
                    "}"
                ],
                "name": "click",
                "scope": "me",
                "designer|targetType": "Ext.button.Button",
                "designer|controlQuery": "#ESSearchButton"
            },
            "designerId": "73056bf5-5078-4dd5-bd60-eb6b0e8f8262"
        }
    ]
}